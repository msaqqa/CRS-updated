{"ast":null,"code":"import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{IMG01}from'../img.jsx';import{Link}from'react-router-dom';import{Modal}from'react-bootstrap';// slider\nimport Slider from\"react-slick\";// context\nimport{JobConsumer,JobContext}from\"../../../context/jobs\";// react CKEditor text editor\nimport{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';// ReactHtmlParser\nimport ReactHtmlParser from'react-html-parser';// moment\nimport moment from\"moment\";import PageLoading from\"../../loading/pageloading\";var HomeBookDoctor=/*#__PURE__*/function(_Component){_inherits(HomeBookDoctor,_Component);var _super=_createSuper(HomeBookDoctor);function HomeBookDoctor(){var _this;_classCallCheck(this,HomeBookDoctor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={show:false,disabled:null,titleText:\"\",coverLetter:\"\",jobTitle:\"\",jobId:0,isEmployee:false,isPosted:false};_this.componentDidMount=function(){var user=JSON.parse(localStorage.getItem('user'));if(user&&user.type==1){_this.setState({disabled:true,titleText:\"You should post as an employee only\"});}};_this.postedSend=function(){if(_this.state.isPosted){_this.setState({disabled:true});}};_this.handleClose=function(){_this.setState({show:false});};_this.handleShow=function(id,title){_this.checkUserMember();_this.setState({show:true,jobId:id,jobTitle:title});};_this.checkUserMember=function(){var user=JSON.parse(localStorage.getItem('user'));if(user&&user.type==2){_this.setState({isEmployee:true});}else{_this.setState({isEmployee:false});}};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,jobId,coverLetter,setProposalJob,isEmpty;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,jobId=_this$state.jobId,coverLetter=_this$state.coverLetter;setProposalJob=_this.context.setProposalJob;isEmpty=!coverLetter;if(!isEmpty){_context.next=8;break;}return _context.abrupt(\"return\",false);case 8:_context.next=10;return setProposalJob(jobId,coverLetter);case 10:_this.handleClose();case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(HomeBookDoctor,[{key:\"render\",value:function render(){var _this2=this;var settings={width:400,dots:false,infinite:true,speed:500,slidesToShow:4,slidesToScroll:4,centerPadding:'10px',arrows:true,centerMode:true,responsive:[{breakpoint:400,settings:{slidesToShow:1,slidesToScroll:1,infinite:true}},{breakpoint:993,settings:{slidesToShow:2,slidesToScroll:2,infinite:true}}]};return/*#__PURE__*/React.createElement(\"section\",{className:\"section section-doctor\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section-header text-center\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Recent Jobs\")),/*#__PURE__*/React.createElement(\"div\",{className:\"doctor-slider slider\"},/*#__PURE__*/React.createElement(JobConsumer,null,function(value){var recentJobs=value.categories.recentJobs,getCategoriesJobs=value.getCategoriesJobs,getSingleJob=value.getSingleJob,loading=value.loading;if(loading){return/*#__PURE__*/React.createElement(PageLoading,{loading:loading});}return/*#__PURE__*/React.createElement(Slider,settings,recentJobs.map(function(job){var id=job.id,image=job.image,title=job.title,details=job.details,category=job.category,employer=Object.assign({},job.employer),created_at=job.created_at,finish_at=job.finish_at;var categoryObj=category?_objectSpread({},category):{};var categoryId=categoryObj.id,categoryName=categoryObj.name,categoryImg=categoryObj.image;var employerName=employer.name;// job.posted? this.postedSend : false;\n// const imageUrl = image? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\nvar categoryImgUrl=categoryImg?\"http://excodeteam.com/crs/public/images/\".concat(categoryImg):IMG01;var subDetails=details.substr(0,100);// {ReactHtmlParser(subDetails, node=>node.textContent)}\nreturn/*#__PURE__*/React.createElement(\"div\",{key:id},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-widget\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pro-content\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"title\"},/*#__PURE__*/React.createElement(Link,{to:\"/patient/doctor-profile\"},title)),/*#__PURE__*/React.createElement(\"p\",{className:\"speciality\"},subDetails),/*#__PURE__*/React.createElement(\"h5\",{className:\"doc-department\"},/*#__PURE__*/React.createElement(Link,{to:\"/jobs\",onClick:function onClick(){return getCategoriesJobs(categoryId);}},/*#__PURE__*/React.createElement(\"img\",{src:categoryImgUrl,className:\"img-fluid\",alt:\"Category\"}),categoryName)),/*#__PURE__*/React.createElement(\"ul\",{className:\"available-info\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-black-tie\"}),\" By \",employerName),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-start\"}),\" \",moment(created_at).format(\"YYYY-MM-DD\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-end\"}),\" \",moment(finish_at).format(\"YYYY-MM-DD\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row row-sm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(Link,{to:\"/jobs/single-job/\".concat(id),className:\"btn view-btn w-100\",onClick:function onClick(){return getSingleJob(id);}},\"View Details\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"button\",{title:_this2.state.titleText,className:\"btn book-btn w-100\",disabled:_this2.state.disabled,onClick:function onClick(){return _this2.handleShow(id,title);}},\"Post Proposal\"))))));}));}),/*#__PURE__*/React.createElement(\"div\",{className:\"view-all text-center\"},/*#__PURE__*/React.createElement(Link,{to:\"/jobs\",onClick:function onClick(){return _this2.context.getCategoriesJobs();},className:\"btn btn-primary\"},\"View All\")),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",show:this.state.show,onHide:this.handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,this.state.jobTitle)),/*#__PURE__*/React.createElement(Modal.Body,null,this.state.isEmployee?/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cover Letter\"),/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,onChange:function onChange(e,editor){return _this2.setState({coverLetter:editor.getData()});}})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary mr-2\",onClick:function onClick(e){return _this2.handleSubmit(e);}},\"Send\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:function onClick(){return _this2.handleClose();}},\"Cancel\")):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"You must be logged in to make a proposal\"),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"btn btn-primary mr-2\"},\"Login\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:function onClick(){return _this2.handleClose();}},\"Cancel\")))))));}}]);return HomeBookDoctor;}(Component);HomeBookDoctor.contextType=JobContext;export default HomeBookDoctor;","map":{"version":3,"sources":["E:/CSR-master/src/client/components/home/recentjobs/index.jsx"],"names":["React","Component","IMG01","Link","Modal","Slider","JobConsumer","JobContext","CKEditor","ClassicEditor","ReactHtmlParser","moment","PageLoading","HomeBookDoctor","state","show","disabled","titleText","coverLetter","jobTitle","jobId","isEmployee","isPosted","componentDidMount","user","JSON","parse","localStorage","getItem","type","setState","postedSend","handleClose","handleShow","id","title","checkUserMember","handleSubmit","e","preventDefault","setProposalJob","context","isEmpty","settings","width","dots","infinite","speed","slidesToShow","slidesToScroll","centerPadding","arrows","centerMode","responsive","breakpoint","value","recentJobs","categories","getCategoriesJobs","getSingleJob","loading","map","job","image","details","category","employer","created_at","finish_at","categoryObj","categoryId","categoryName","name","categoryImg","employerName","categoryImgUrl","subDetails","substr","format","editor","getData","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { IMG01 } from '../img.jsx';\nimport { Link } from 'react-router-dom';\nimport { Modal } from 'react-bootstrap';\n// slider\nimport Slider from \"react-slick\";\n// context\nimport { JobConsumer, JobContext } from \"../../../context/jobs\";\n// react CKEditor text editor\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\n// ReactHtmlParser\nimport ReactHtmlParser from 'react-html-parser';\n// moment\nimport moment from \"moment\";\nimport PageLoading from \"../../loading/pageloading\";\n\nclass HomeBookDoctor extends Component {\n\n  state = {\n    show: false,\n    disabled: null,\n    titleText: \"\",\n    coverLetter: \"\",\n    jobTitle: \"\",\n    jobId: 0,\n    isEmployee: false,\n    isPosted: false,\n  }\n\n  componentDidMount = () => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user && user.type == 1) {\n      this.setState({\n        disabled: true,\n        titleText: \"You should post as an employee only\"\n      });\n    }\n  }\n\n  // handleSingleJob = async (id) => {\n  //   await this.context.getSingleJob(id);\n  //   this.props.history.push(`/jobs/single-job/${id}`);\n  // }\n\n  postedSend = () => {\n    if (this.state.isPosted) {\n      this.setState({ disabled: true });\n    }\n  }\n\n  handleClose = () => {\n    this.setState({\n      show: false\n    });\n  }\n\n  handleShow = (id, title) => {\n    this.checkUserMember();\n    this.setState({\n      show: true,\n      jobId: id,\n      jobTitle: title\n    });\n  }\n\n  checkUserMember = () => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user && user.type == 2) {\n      this.setState({\n        isEmployee: true,\n      });\n    } else {\n      this.setState({\n        isEmployee: false,\n      });\n    }\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const { jobId, coverLetter } = this.state;\n    const { setProposalJob } = this.context;\n    const isEmpty = !coverLetter;\n    if (isEmpty) {\n      return false;\n    } else {\n      await setProposalJob(jobId, coverLetter);\n      this.handleClose();\n    }\n  }\n\n  render() {\n    const settings = {\n      width: 400,\n      dots: false,\n      infinite: true,\n      speed: 500,\n      slidesToShow: 4,\n      slidesToScroll: 4,\n      centerPadding: '10px',\n      arrows: true,\n      centerMode: true,\n      responsive: [\n        {\n          breakpoint: 400,\n          settings: {\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            infinite: true,\n          }\n        },\n        {\n          breakpoint: 993,\n          settings: {\n            slidesToShow: 2,\n            slidesToScroll: 2,\n            infinite: true,\n          }\n        }\n      ]\n    };\n\n    return (\n      <section className=\"section section-doctor\">\n        <div className=\"container-fluid\">\n          <div className=\"section-header text-center\">\n            <h2>Recent Jobs</h2>\n            {/* <p>Lorem Ipsum is simply dummy text </p> */}\n          </div>\n          <div className=\"doctor-slider slider\">\n            {\n              <JobConsumer>\n                {(value) => {\n                  const { categories: { recentJobs }, getCategoriesJobs, getSingleJob, loading } = value;\n                  if (loading) {\n                    return <PageLoading loading={loading} />\n                  }\n                  return (\n                    <Slider {...settings}>\n                      {\n                        recentJobs.map((job) => {\n                          const { id, image, title, details, category, employer: { ...employer }, created_at, finish_at } = job;\n                          const categoryObj = category ? { ...category } : {};\n                          const { id: categoryId, name: categoryName, image: categoryImg } = categoryObj;\n                          const { name: employerName } = employer;\n                          // job.posted? this.postedSend : false;\n                          // const imageUrl = image? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\n                          const categoryImgUrl = categoryImg ? `http://excodeteam.com/crs/public/images/${categoryImg}` : IMG01;\n                          const subDetails = details.substr(0, 100);\n                          // {ReactHtmlParser(subDetails, node=>node.textContent)}\n                          return (\n                            <div key={id}>\n                              <div className=\"profile-widget\">\n                                <div className=\"pro-content\">\n                                  <h3 className=\"title\">\n                                    <Link to=\"/patient/doctor-profile\">{title}</Link>\n                                  </h3>\n                                  <p className=\"speciality\">{subDetails}</p>\n                                  <h5 className=\"doc-department\"><Link to=\"/jobs\" onClick={() => getCategoriesJobs(categoryId)}><img src={categoryImgUrl} className=\"img-fluid\" alt=\"Category\" />{categoryName}</Link></h5>\n                                  <ul className=\"available-info\">\n                                    <li><i className=\"fab fa-black-tie\"></i> By {employerName}</li>\n                                    <li><i className=\"fas fa-hourglass-start\"></i> {moment(created_at).format(\"YYYY-MM-DD\")}</li>\n                                    <li><i className=\"fas fa-hourglass-end\"></i> {moment(finish_at).format(\"YYYY-MM-DD\")}</li>\n                                  </ul>\n                                  <div className=\"row row-sm\">\n                                    <div className=\"col-6\">\n                                      <Link to={`/jobs/single-job/${id}`} className=\"btn view-btn w-100\" onClick={() => getSingleJob(id)}>View Details</Link>\n                                    </div>\n                                    <div className=\"col-6\">\n                                      <button title={this.state.titleText} className=\"btn book-btn w-100\" disabled={this.state.disabled} onClick={() => this.handleShow(id, title)}>Post Proposal</button>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          )\n                        })\n                      }\n                    </Slider>\n                  )\n                }}\n              </JobConsumer>\n            }\n\n            <div className=\"view-all text-center\">\n              <Link to=\"/jobs\" onClick={() => this.context.getCategoriesJobs()} className=\"btn btn-primary\">View All</Link>\n            </div>\n\n            {/*view modal*/}\n            <Modal size=\"lg\" show={this.state.show} onHide={this.handleClose} centered>\n              <Modal.Header closeButton>\n                <Modal.Title>{this.state.jobTitle}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                {this.state.isEmployee\n                  ? <form>\n                    <div className=\"form-group\">\n                      <label>Cover Letter</label>\n                      <CKEditor\n                        editor={ClassicEditor}\n                        onChange={(e, editor) => this.setState({ coverLetter: editor.getData() })}\n                      />\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-primary mr-2\" onClick={(e) => this.handleSubmit(e)}>Send</button>\n                    <button type=\"button\" className=\"btn btn-light\" onClick={() => this.handleClose()}>Cancel</button>\n                  </form>\n                  : <>\n                    <p>You must be logged in to make a proposal</p>\n                    <Link to=\"/login\" className=\"btn btn-primary mr-2\">Login</Link>\n                    <button type=\"button\" className=\"btn btn-light\" onClick={() => this.handleClose()}>Cancel</button>\n                  </>\n                }\n              </Modal.Body>\n            </Modal>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nHomeBookDoctor.contextType = JobContext\nexport default HomeBookDoctor;"]},"metadata":{},"sourceType":"module"}