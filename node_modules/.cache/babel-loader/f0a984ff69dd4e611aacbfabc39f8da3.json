{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Table}from'antd';import'antd/dist/antd.css';import{Link}from'react-router-dom';import{Modal}from'react-bootstrap';import{itemRender,onShowSizeChange}from\"../../components/paginationfunction\";import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import IMG01 from'../../assets/images/specialities-01.png';// context\nimport{AdminContext}from\"../../context/admin\";var Categories=/*#__PURE__*/function(_Component){_inherits(Categories,_Component);var _super=_createSuper(Categories);function Categories(props){var _this;_classCallCheck(this,Categories);_this=_super.call(this,props);_this.componentDidMount=function(){_this.context.getCategories();};_this.handleClose=function(){_this.setState({show:false});};_this.handleShow=function(id){_this.setState({show:id});};_this.handleAddBtn=function(){_this.setState({id:\"\",name:\"\",parent:\"\",image:\"\",isEdit:false});_this.handleShow('edit');};_this.handleEditBtn=function(_ref){var id=_ref.id,name=_ref.name,parent=_ref.parent,image=_ref.image;_this.setState({id:id,name:name,parent:parent,image:image,isEdit:true});_this.handleShow('edit');};_this.handleDeleteBtn=function(id){_this.setState({id:id});_this.handleShow('delete');};_this.initialValues=function(){return{name:_this.state.name,parent:_this.state.parent,image:null};};_this.validationSchema=function(){var SUPPORTED_FORMATS=[\"image/jpg\",\"image/jpeg\",\"image/gif\",\"image/png\"];return Yup.object().shape({name:Yup.string().required(\"Required\"),parent:Yup.string().required(\"Required\"),image:Yup.mixed().required(\"Required\")// .test(\n//   \"fileSize\",\n//   \"File too large\",\n//   value => value && value.size <= FILE_SIZE\n// )\n.test(\"fileFormat\",\"Unsupported Format\",function(value){return value&&SUPPORTED_FORMATS.includes(value.type);})});};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_this.state.id;if(!_this.state.isEdit){_context.next=6;break;}_context.next=4;return _this.context.updateCategory(_objectSpread({id:id},values));case 4:_context.next=8;break;case 6:_context.next=8;return _this.context.addCategory(values);case 8:_this.handleClose();case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={show:null,isEdit:false,id:\"\",name:\"\",parent:\"\",image:null};return _this;}_createClass(Categories,[{key:\"render\",value:function render(){var _this2=this;var _this$context=this.context,categories=_this$context.categories,getSubCategories=_this$context.getSubCategories;var data=categories;var columns=[{title:'#',dataIndex:'id',sorter:function sorter(a,b){return a.id.length-b.id.length;}},{title:'Category',dataIndex:'name',render:function render(text,_ref3){var image=_ref3.image,name=_ref3.name,id=_ref3.id;var imageUrl=image?\"http://excodeteam.com/crs/public/images/\".concat(image):IMG01;return/*#__PURE__*/React.createElement(\"h2\",{className:\"table-avatar\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/categories/\".concat(id),onClick:function onClick(){return getSubCategories(id);},className:\"avatar avatar-sm mr-2\"},/*#__PURE__*/React.createElement(\"img\",{src:imageUrl,className:\"avatar-img\",alt:\"\"})),/*#__PURE__*/React.createElement(Link,{to:\"/admin/categories/\".concat(id),onClick:function onClick(){return getSubCategories(id);}},name));},sorter:function sorter(a,b){return a.name.length-b.name.length;}},{title:'Actions',dataIndex:'id',render:function render(id,record){return/*#__PURE__*/React.createElement(\"div\",{className:\"actions\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-success-light\",onClick:function onClick(){return _this2.handleEditBtn(record);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fe fe-pencil\"}),\" Edit\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-danger-light\",onClick:function onClick(){return _this2.handleDeleteBtn(id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fe fe-trash\"}),\" Delete\"));}}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"page-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-7 col-auto\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"page-title\"},\"Categories\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin\"},\"Dashboard\")),/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item active\"},\"Categories\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-5 col\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary float-right mt-2\",onClick:this.handleAddBtn},\"Add\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(Table,{className:\"table-striped\",style:{overflowX:'auto'},columns:columns// bordered\n,dataSource:data,ascend:true,rowKey:function rowKey(record){return record.id;},showSizeChanger:true,pagination:{total:data.length,showTotal:function showTotal(total,range){return\"Showing \".concat(range[0],\" to \").concat(range[1],\" of \").concat(total,\" entries\");},showSizeChanger:true,onShowSizeChange:onShowSizeChange,itemRender:itemRender}}))))))),/*#__PURE__*/React.createElement(Modal,{show:this.state.show==='edit',onHide:this.handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"modal-title\"},\"Category\"))),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Formik,{initialValues:this.initialValues(),validationSchema:this.validationSchema,onSubmit:this.handleSubmit,validateOnChange:false,enableReinitialize:true},function(formik){var setFieldValue=formik.setFieldValue;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-sm-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Category Name\"),/*#__PURE__*/React.createElement(Field,{type:\"text\",name:\"name\",className:\"form-control\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"name\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-sm-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Main Category\"),/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"parent\",className:\"form-control\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select Parent Category\"),/*#__PURE__*/React.createElement(\"option\",{value:\"0\"},\"Main Category\"),categories.map(function(category){return/*#__PURE__*/React.createElement(\"option\",{key:category.id,value:category.id},category.name);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"parent\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Image\"),/*#__PURE__*/React.createElement(Field,{type:\"file\",name:\"file\",className:\"form-control\",onChange:function onChange(event){setFieldValue(\"image\",event.currentTarget.files[0]);}}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"image\"})))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\"},\"Save Changes\"));}))),/*#__PURE__*/React.createElement(Modal,{show:this.state.show==='delete',onHide:this.handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Body,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-content p-2\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"modal-title\"},\"Delete\"),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-4\"},\"Are you sure want to delete?\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){_this2.context.deleteCategory(_this2.state.id);_this2.handleClose();}},\"Save \"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger\",\"data-dismiss\":\"modal\",onClick:function onClick(){return _this2.handleClose();}},\"Close\"))))));}}]);return Categories;}(Component);Categories.contextType=AdminContext;export default Categories;","map":{"version":3,"sources":["E:/CSR-master/src/admin/components/categories/index.jsx"],"names":["React","Component","Table","Link","Modal","itemRender","onShowSizeChange","Formik","Form","Field","ErrorMessage","Yup","IMG01","AdminContext","Categories","props","componentDidMount","context","getCategories","handleClose","setState","show","handleShow","id","handleAddBtn","name","parent","image","isEdit","handleEditBtn","handleDeleteBtn","initialValues","state","validationSchema","SUPPORTED_FORMATS","object","shape","string","required","mixed","test","value","includes","type","handleSubmit","values","updateCategory","addCategory","categories","getSubCategories","data","columns","title","dataIndex","sorter","a","b","length","render","text","imageUrl","record","overflowX","total","showTotal","range","showSizeChanger","formik","setFieldValue","map","category","event","currentTarget","files","deleteCategory","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Table } from 'antd';\nimport 'antd/dist/antd.css';\nimport { Link } from 'react-router-dom';\nimport { Modal } from 'react-bootstrap';\nimport { itemRender, onShowSizeChange } from \"../../components/paginationfunction\";\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport IMG01 from '../../assets/images/specialities-01.png';\n// context\nimport { AdminContext } from \"../../context/admin\";\n\nclass Categories extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: null,\n      isEdit: false,\n      id: \"\",\n      name: \"\",\n      parent: \"\",\n      image: null,\n    }\n  }\n\n  componentDidMount = () => {\n    this.context.getCategories();\n  }\n\n  handleClose = () => {\n    this.setState({\n      show: false\n    });\n  }\n\n  handleShow = (id) => {\n    this.setState({\n      show: id\n    });\n  }\n\n  handleAddBtn = () => {\n    this.setState({\n      id: \"\",\n      name: \"\",\n      parent: \"\",\n      image: \"\",\n      isEdit: false\n    });\n    this.handleShow('edit');\n  }\n\n  handleEditBtn = ({ id, name, parent, image }) => {\n    this.setState({\n      id,\n      name,\n      parent,\n      image,\n      isEdit: true\n    });\n    this.handleShow('edit');\n  }\n\n  handleDeleteBtn = (id) => {\n    this.setState({ id });\n    this.handleShow('delete');\n  }\n\n  initialValues = () => {\n    return {\n      name: this.state.name,\n      parent: this.state.parent,\n      image: null,\n    }\n  }\n\n\n  validationSchema = () => {\n    const SUPPORTED_FORMATS = [\n      \"image/jpg\",\n      \"image/jpeg\",\n      \"image/gif\",\n      \"image/png\"\n    ];\n\n    return Yup.object().shape({\n      name: Yup.string().required(\"Required\"),\n      parent: Yup.string().required(\"Required\"),\n      image: Yup\n        .mixed()\n        .required(\"Required\")\n        // .test(\n        //   \"fileSize\",\n        //   \"File too large\",\n        //   value => value && value.size <= FILE_SIZE\n        // )\n        .test(\n          \"fileFormat\",\n          \"Unsupported Format\",\n          value => value && SUPPORTED_FORMATS.includes(value.type)\n        )\n    });\n  }\n\n  handleSubmit = async (values) => {\n    const id = this.state.id;\n    this.state.isEdit ? await this.context.updateCategory({ id, ...values }) : await this.context.addCategory(values);\n    this.handleClose();\n  }\n\n  render() {\n    const { categories, getSubCategories } = this.context;\n    const data = categories;\n\n    const columns = [\n      {\n        title: '#',\n        dataIndex: 'id',\n        sorter: (a, b) => a.id.length - b.id.length,\n      },\n      {\n        title: 'Category',\n        dataIndex: 'name',\n        render: (text, { image, name, id }) => {\n          const imageUrl = image ? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\n          return (\n            <h2 className=\"table-avatar\">\n              <Link to={`/admin/categories/${id}`} onClick={() => getSubCategories(id)} className=\"avatar avatar-sm mr-2\"><img src={imageUrl} className=\"avatar-img\" alt=\"\" /></Link>\n              <Link to={`/admin/categories/${id}`} onClick={() => getSubCategories(id)}>{name}</Link>\n            </h2>\n          )\n        },\n        sorter: (a, b) => a.name.length - b.name.length,\n      },\n      {\n        title: 'Actions',\n        dataIndex: 'id',\n        render: (id, record) => (\n          <div className=\"actions\">\n            <button className=\"btn btn-sm bg-success-light\" onClick={() => this.handleEditBtn(record)}><i className=\"fe fe-pencil\"></i> Edit</button>\n            <button className=\"btn btn-sm bg-danger-light\" onClick={() => this.handleDeleteBtn(id)}><i className=\"fe fe-trash\"></i> Delete</button>\n          </div>\n        ),\n      },\n    ]\n\n    return (\n      <>\n        <div className=\"page-wrapper\">\n          <div className=\"content container-fluid\">\n\n            <div className=\"page-header\">\n              <div className=\"row\">\n                <div className=\"col-sm-7 col-auto\">\n                  <h3 className=\"page-title\">Categories</h3>\n                  <ul className=\"breadcrumb\">\n                    <li className=\"breadcrumb-item\"><Link to=\"/admin\">Dashboard</Link></li>\n                    <li className=\"breadcrumb-item active\">Categories</li>\n                  </ul>\n                </div>\n                <div className=\"col-sm-5 col\">\n                  <button className=\"btn btn-primary float-right mt-2\" onClick={this.handleAddBtn}>Add</button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-md-12\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <div className=\"table-responsive\">\n                      <Table className=\"table-striped\"\n                        style={{ overflowX: 'auto' }}\n                        columns={columns}\n                        // bordered\n                        dataSource={data}\n                        ascend={true}\n                        rowKey={record => record.id}\n                        showSizeChanger={true}\n                        pagination={{\n                          total: data.length,\n                          showTotal: (total, range) => `Showing ${range[0]} to ${range[1]} of ${total} entries`,\n                          showSizeChanger: true, onShowSizeChange: onShowSizeChange, itemRender: itemRender\n                        }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Edit Modal */}\n          <Modal show={this.state.show === 'edit'} onHide={this.handleClose} centered>\n            <Modal.Header closeButton>\n              <Modal.Title><h5 className=\"modal-title\">Category</h5></Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <Formik\n                initialValues={this.initialValues()}\n                validationSchema={this.validationSchema}\n                onSubmit={this.handleSubmit}\n                validateOnChange={false}\n                enableReinitialize={true}\n              >\n                {(formik) => {\n                  const { setFieldValue } = formik;\n                  return (\n                    <Form>\n                      <div className=\"row form-row\">\n                        <div className=\"col-12 col-sm-6\">\n                          <div className=\"form-group\">\n                            <label>Category Name</label>\n                            <Field type=\"text\" name=\"name\" className=\"form-control\" />\n                            <ErrorMessage name=\"name\" />\n                          </div>\n                        </div>\n                        <div className=\"col-12 col-sm-6\">\n                          <div className=\"form-group\">\n                            <label>Main Category</label>\n                            <Field as=\"select\" name=\"parent\" className=\"form-control\">\n                              <option value=\"\" disabled>Select Parent Category</option>\n                              <option value=\"0\">Main Category</option>\n                              {\n                                categories.map((category) => {\n                                  return (\n                                    <option key={category.id} value={category.id}>\n                                      {category.name}\n                                    </option>\n                                  );\n                                })\n                              }\n                            </Field>\n                            <ErrorMessage name=\"parent\" />\n                          </div>\n                        </div>\n                        <div className=\"col-12\">\n                          <div className=\"form-group\">\n                            <label>Image</label>\n                            <Field type=\"file\" name=\"file\" className=\"form-control\" onChange={(event) => {\n                              setFieldValue(\"image\", event.currentTarget.files[0]);\n                            }}\n                            />\n                            <ErrorMessage name=\"image\" />\n                          </div>\n                        </div>\n                      </div>\n                      <button type=\"submit\" className=\"btn btn-primary btn-block\">Save Changes</button>\n                    </Form>\n                  )\n                }}\n              </Formik>\n            </Modal.Body>\n          </Modal>\n\n          {/* Delete Modal */}\n          <Modal show={this.state.show === 'delete'} onHide={this.handleClose} centered>\n            <Modal.Body className=\"text-center\">\n              <div className=\"form-content p-2\">\n                <h4 className=\"modal-title\">Delete</h4>\n                <p className=\"mb-4\">Are you sure want to delete?</p>\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => { this.context.deleteCategory(this.state.id); this.handleClose() }}>Save </button>\n                <button type=\"button\" className=\"btn btn-danger\" data-dismiss=\"modal\" onClick={() => this.handleClose()}>Close</button>\n              </div>\n            </Modal.Body>\n          </Modal>\n        </div>\n      </>\n    )\n  }\n}\n\nCategories.contextType = AdminContext;\nexport default Categories;"]},"metadata":{},"sourceType":"module"}