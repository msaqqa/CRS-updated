{"ast":null,"code":"import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import loginBanner from'../../assets/images/login-banner.png';import{Link}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as yup from'yup';import ActionLoading from\"../loading/actionloading\";import{UserContext}from\"../../context/user\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={subCategories:[],isEmployee:true};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.getElementsByTagName('body')[0].className='account-page';_context.next=3;return _this.context.getCategories();case 3:_context.next=5;return _this.context.getCountries();case 5:case\"end\":return _context.stop();}}},_callee);}));_this.checkUserType=function(event){var value=event.target.value;if(value===\"2\"){_this.setState({isEmployee:true});}else if(value===\"1\"){_this.setState({isEmployee:false});}};_this.changeCtegory=function(event){console.log(event.target.value);_this.setState({subCategories:_this.context.categories.find(function(cntry){return cntry.id==event.target.value;}).sub_category});};_this.initialValues=function(){return{name:\"\",type:\"\",email:\"\",mobile:\"\",password:\"\",confirmPassword:\"\",category:\"\",subCategory:\"\",country:\"\"};};_this.schema=function(){var phoneRegExp=/^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/;var schema=yup.object().shape({name:yup.string().required(\"Required\"),type:yup.number().required(\"Required\"),email:yup.string().email(\"Invalid email format\").required(\"Required\"),mobile:yup.string().matches(phoneRegExp,'Mobile number is not valid').required(\"Required\"),password:yup.string().required(\"Required\"),confirmPassword:yup.string().oneOf([yup.ref('password'),null],'Passwords must match').required(\"Required\"),country:yup.string().required(\"Required\")});return schema;};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var category,subCategory,country,userRegister;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(values);category=values.category,subCategory=values.subCategory,country=values.country;userRegister=_this.context.userRegister;console.log(values);_context2.next=6;return userRegister(_objectSpread(_objectSpread({},values),{},{country_id:country,category_id:category,sub_category:subCategory}));case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.form=function(props){var handleChange=props.handleChange,isSubmitting=props.isSubmitting;// setFieldValue(\"type\", e.target.value)\nreturn/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"name\",type:\"text\",className:\"form-control floating\",placeholder:\"Name\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"name\",component:\"div\",className:\"text-danger text-xs\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"type\",as:\"select\",className:\"form-control floating placeholder\",onChange:function onChange(e){_this.checkUserType(e);handleChange(e);}},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Employer/Employee\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"Employer\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"Employee\")),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"type\",component:\"div\",className:\"text-danger text-xs\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"email\",type:\"email\",className:\"form-control floating\",placeholder:\"Email\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"email\",component:\"div\",className:\"text-danger text-xs\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"mobile\",type:\"tel\",className:\"form-control floating\",placeholder:\"Mobile\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"mobile\",component:\"div\",className:\"text-danger text-xs\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"password\",type:\"password\",className:\"form-control floating\",placeholder:\"Create Password\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"password\",component:\"div\",className:\"text-danger text-xs\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{name:\"confirmPassword\",type:\"password\",className:\"form-control floating\",placeholder:\"Confirm Password\"}),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"confirmPassword\",component:\"div\",className:\"text-danger text-xs\"}))),_this.state.isEmployee?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"category\",className:\"form-control floating placeholder\",onChange:function onChange(e){_this.changeCtegory(e);handleChange(e);}},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select Category\"),_this.context.categories.map(function(category){return/*#__PURE__*/React.createElement(\"option\",{key:category.id,value:category.id},category.name);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"category\",component:\"div\",className:\"text-danger text-xs\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus col-md-6\"},/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"subCategory\",className:\"form-control floating placeholder\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select Sub Category\"),_this.state.subCategories.map(function(subCategory){return/*#__PURE__*/React.createElement(\"option\",{key:subCategory.id,value:subCategory.id},subCategory.name);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus\"},/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"country\",className:\"form-control floating placeholder\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select Country\"),_this.context.countries.map(function(country,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:country},country);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"country\",component:\"div\",className:\"text-danger text-xs\"}))):/*#__PURE__*/React.createElement(\"div\",{className:\"form-group form-focus\"},/*#__PURE__*/React.createElement(Field,{as:\"select\",name:\"country\",className:\"form-control floating placeholder\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select Country\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Germany\"},\"Germany\")),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"country\",component:\"div\",className:\"text-danger text-xs\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"forgot-link\"},\"Already have an account?\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-block btn-lg login-btn\",type:\"submit\",disabled:isSubmitting},/*#__PURE__*/React.createElement(\"span\",null,\"Signup\"),/*#__PURE__*/React.createElement(ActionLoading,{loading:_this.context.loading})));};return _this;}_createClass(Register,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.getElementsByTagName('body')[0].className='';}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-10 offset-md-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"account-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 col-lg-5 login-left\"},/*#__PURE__*/React.createElement(\"img\",{src:loginBanner,className:\"img-fluid\",alt:\"Login Banner\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-7 login-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-header\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Signup\")),/*#__PURE__*/React.createElement(Formik,{initialValues:this.initialValues(),validationSchema:this.schema,onSubmit:this.handleSubmit,validateOnChange:false},this.form))))))));}}]);return Register;}(Component);Register.contextType=UserContext;export default Register;","map":{"version":3,"sources":["E:/CSR-master/src/client/components/register/register.jsx"],"names":["React","Component","loginBanner","Link","Formik","Form","Field","ErrorMessage","yup","ActionLoading","UserContext","Register","state","subCategories","isEmployee","componentDidMount","document","getElementsByTagName","className","context","getCategories","getCountries","checkUserType","event","value","target","setState","changeCtegory","console","log","categories","find","cntry","id","sub_category","initialValues","name","type","email","mobile","password","confirmPassword","category","subCategory","country","schema","phoneRegExp","object","shape","string","required","number","matches","oneOf","ref","handleSubmit","values","userRegister","country_id","category_id","form","props","handleChange","isSubmitting","e","map","countries","index","loading","contextType"],"mappings":"k7BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,sCAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,CAA8BC,YAA9B,KAAkD,QAAlD,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,0BAA1B,CACA,OAASC,WAAT,KAA4B,oBAA5B,C,GAEMC,CAAAA,Q,mUACLC,K,CAAQ,CACLC,aAAa,CAAE,EADV,CAELC,UAAU,CAAE,IAFP,C,OAKNC,iB,sEAAoB,mIACnBC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,SAAzC,CAAqD,cAArD,CADmB,sBAGZ,OAAKC,OAAL,CAAaC,aAAb,EAHY,8BAIZ,OAAKD,OAAL,CAAaE,YAAb,EAJY,uD,SAWrBC,a,CAAgB,SAACC,KAAD,CAAW,CACzB,GAAOC,CAAAA,KAAP,CAAgBD,KAAK,CAACE,MAAtB,CAAOD,KAAP,CACA,GAAGA,KAAK,GAAG,GAAX,CAAe,CACb,MAAKE,QAAL,CAAc,CAACZ,UAAU,CAAE,IAAb,CAAd,EACD,CAFD,IAEO,IAAGU,KAAK,GAAG,GAAX,CAAe,CACpB,MAAKE,QAAL,CAAc,CAACZ,UAAU,CAAE,KAAb,CAAd,EACD,CACF,C,OAEDa,a,CAAgB,SAACJ,KAAD,CAAW,CACzBK,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACE,MAAN,CAAaD,KAAzB,EACF,MAAKE,QAAL,CAAc,CACVb,aAAa,CAAG,MAAKM,OAAL,CAAaW,UAAb,CAAwBC,IAAxB,CAA6B,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,EAAN,EAAYV,KAAK,CAACE,MAAN,CAAaD,KAA7B,EAAlC,EAAsEU,YAD5E,CAAd,EAGC,C,OAEDC,a,CAAgB,UAAM,CACpB,MACE,CACEC,IAAI,CAAE,EADR,CAEEC,IAAI,CAAE,EAFR,CAGEC,KAAK,CAAE,EAHT,CAIEC,MAAM,CAAE,EAJV,CAKEC,QAAQ,CAAE,EALZ,CAMEC,eAAe,CAAE,EANnB,CAOEC,QAAQ,CAAE,EAPZ,CAQEC,WAAW,CAAE,EARf,CASEC,OAAO,CAAE,EATX,CADF,CAaD,C,OAEDC,M,CAAS,UAAM,CACb,GAAMC,CAAAA,WAAW,CAAG,yGAApB,CACA,GAAMD,CAAAA,MAAM,CAAIrC,GAAG,CAACuC,MAAJ,GAAaC,KAAb,CAAmB,CACjCZ,IAAI,CAAE5B,GAAG,CAACyC,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAD2B,CAEjCb,IAAI,CAAE7B,GAAG,CAAC2C,MAAJ,GAAaD,QAAb,CAAsB,UAAtB,CAF2B,CAGjCZ,KAAK,CAAE9B,GAAG,CAACyC,MAAJ,GAAaX,KAAb,CAAmB,sBAAnB,EAA2CY,QAA3C,CAAoD,UAApD,CAH0B,CAIjCX,MAAM,CAAE/B,GAAG,CAACyC,MAAJ,GAAaG,OAAb,CAAqBN,WAArB,CAAkC,4BAAlC,EAAgEI,QAAhE,CAAyE,UAAzE,CAJyB,CAKjCV,QAAQ,CAAEhC,GAAG,CAACyC,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CALuB,CAMjCT,eAAe,CAAEjC,GAAG,CAACyC,MAAJ,GAAaI,KAAb,CAAmB,CAAC7C,GAAG,CAAC8C,GAAJ,CAAQ,UAAR,CAAD,CAAsB,IAAtB,CAAnB,CAAgD,sBAAhD,EAAwEJ,QAAxE,CAAiF,UAAjF,CANgB,CAOjCN,OAAO,CAAEpC,GAAG,CAACyC,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAPwB,CAAnB,CAAhB,CASA,MAAOL,CAAAA,MAAP,CACD,C,OAEDU,Y,2FAAe,kBAAOC,MAAP,oKACb5B,OAAO,CAACC,GAAR,CAAY2B,MAAZ,EACOd,QAFM,CAE4Bc,MAF5B,CAENd,QAFM,CAEIC,WAFJ,CAE4Ba,MAF5B,CAEIb,WAFJ,CAEiBC,OAFjB,CAE4BY,MAF5B,CAEiBZ,OAFjB,CAGNa,YAHM,CAGU,MAAKtC,OAHf,CAGNsC,YAHM,CAIb7B,OAAO,CAACC,GAAR,CAAY2B,MAAZ,EAJa,uBAKPC,CAAAA,YAAY,gCAAKD,MAAL,MAAaE,UAAU,CAAEd,OAAzB,CAAkCe,WAAW,CAAEjB,QAA/C,CAAyDR,YAAY,CAAES,WAAvE,GALL,yD,sEAQhBiB,I,CAAO,SAACC,KAAD,CAAW,CACd,GAAOC,CAAAA,YAAP,CAAqCD,KAArC,CAAOC,YAAP,CAAqBC,YAArB,CAAqCF,KAArC,CAAqBE,YAArB,CACA;AACD,mBACE,oBAAC,IAAD,mBACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACI,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,MAAxB,CAA+B,SAAS,CAAC,uBAAzC,CAAiE,WAAW,CAAC,MAA7E,EADJ,cAEI,oBAAC,YAAD,EAAc,IAAI,CAAC,MAAnB,CAA0B,SAAS,CAAC,KAApC,CAA0C,SAAS,CAAC,qBAApD,EAFJ,CADF,cAKE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,QAAtB,CAA+B,SAAS,CAAC,mCAAzC,CACE,QAAQ,CAAE,kBAACC,CAAD,CAAK,CAAC,MAAK1C,aAAL,CAAmB0C,CAAnB,EAAuBF,YAAY,CAACE,CAAD,CAAZ,CAAgB,CADzD,eAGE,8BAAQ,KAAK,CAAC,EAAd,CAAkB,QAAQ,KAA1B,sBAHF,cAIE,8BAAQ,KAAK,CAAC,GAAd,aAJF,cAKE,8BAAQ,KAAK,CAAC,GAAd,aALF,CADF,cAQE,oBAAC,YAAD,EAAc,IAAI,CAAC,MAAnB,CAA0B,SAAS,CAAC,KAApC,CAA0C,SAAS,CAAC,qBAApD,EARF,CALF,CADF,cAkBH,2BAAK,SAAS,CAAC,UAAf,eACC,2BAAK,SAAS,CAAC,gCAAf,eACC,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,OAAzB,CAAiC,SAAS,CAAC,uBAA3C,CAAmE,WAAW,CAAC,OAA/E,EADD,cAEC,oBAAC,YAAD,EAAc,IAAI,CAAC,OAAnB,CAA2B,SAAS,CAAC,KAArC,CAA2C,SAAS,CAAC,qBAArD,EAFD,CADD,cAKC,2BAAK,SAAS,CAAC,gCAAf,eACC,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,KAA1B,CAAgC,SAAS,CAAC,uBAA1C,CAAkE,WAAW,CAAC,QAA9E,EADD,cAEC,oBAAC,YAAD,EAAc,IAAI,CAAC,QAAnB,CAA4B,SAAS,CAAC,KAAtC,CAA4C,SAAS,CAAC,qBAAtD,EAFD,CALD,CAlBG,cA4BA,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,SAAS,CAAC,uBAAjD,CAAyE,WAAW,CAAC,iBAArF,EADF,cAEE,oBAAC,YAAD,EAAc,IAAI,CAAC,UAAnB,CAA8B,SAAS,CAAC,KAAxC,CAA8C,SAAS,CAAC,qBAAxD,EAFF,CADF,cAKE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,IAAI,CAAC,UAAnC,CAA8C,SAAS,CAAC,uBAAxD,CAAgF,WAAW,CAAC,kBAA5F,EADF,cAEE,oBAAC,YAAD,EAAc,IAAI,CAAC,iBAAnB,CAAqC,SAAS,CAAC,KAA/C,CAAqD,SAAS,CAAC,qBAA/D,EAFF,CALF,CA5BA,CAsCC,MAAKpD,KAAL,CAAWE,UAAX,cACG,qDACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,KAAD,EAAO,EAAE,CAAC,QAAV,CAAmB,IAAI,CAAC,UAAxB,CAAmC,SAAS,CAAC,mCAA7C,CACE,QAAQ,CAAE,kBAACkD,CAAD,CAAK,CAAC,MAAKrC,aAAL,CAAmBqC,CAAnB,EAAuBF,YAAY,CAACE,CAAD,CAAZ,CAAgB,CADzD,eAGE,8BAAQ,KAAK,CAAC,EAAd,CAAiB,QAAQ,KAAzB,oBAHF,CAKI,MAAK7C,OAAL,CAAaW,UAAb,CAAwBmC,GAAxB,CAA4B,SAACvB,QAAD,CAAc,CACxC,mBACE,8BAAQ,GAAG,CAAEA,QAAQ,CAACT,EAAtB,CAA0B,KAAK,CAAES,QAAQ,CAACT,EAA1C,EACGS,QAAQ,CAACN,IADZ,CADF,CAKD,CAND,CALJ,CADF,cAeE,oBAAC,YAAD,EAAc,IAAI,CAAC,UAAnB,CAA8B,SAAS,CAAC,KAAxC,CAA8C,SAAS,CAAC,qBAAxD,EAfF,CADF,cAkBE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,KAAD,EAAO,EAAE,CAAC,QAAV,CAAmB,IAAI,CAAC,aAAxB,CAAsC,SAAS,CAAC,mCAAhD,eACE,8BAAQ,KAAK,CAAC,EAAd,CAAiB,QAAQ,KAAzB,wBADF,CAGI,MAAKxB,KAAL,CAAWC,aAAX,CAAyBoD,GAAzB,CAA6B,SAAAtB,WAAW,CAAI,CAC1C,mBACE,8BAAQ,GAAG,CAAEA,WAAW,CAACV,EAAzB,CAA6B,KAAK,CAAEU,WAAW,CAACV,EAAhD,EACGU,WAAW,CAACP,IADf,CADF,CAKD,CAND,CAHJ,CADF,CAlBF,CADF,cAkCE,2BAAK,SAAS,CAAC,uBAAf,eACA,oBAAC,KAAD,EAAO,EAAE,CAAC,QAAV,CAAmB,IAAI,CAAC,SAAxB,CAAkC,SAAS,CAAC,mCAA5C,eACE,8BAAQ,KAAK,CAAC,EAAd,CAAiB,QAAQ,KAAzB,mBADF,CAGI,MAAKjB,OAAL,CAAa+C,SAAb,CAAuBD,GAAvB,CAA2B,SAACrB,OAAD,CAAUuB,KAAV,CAAoB,CAC7C,mBACE,8BAAQ,GAAG,CAAEA,KAAb,CAAoB,KAAK,CAAEvB,OAA3B,EACGA,OADH,CADF,CAKD,CAND,CAHJ,CADA,cAaA,oBAAC,YAAD,EAAc,IAAI,CAAC,SAAnB,CAA6B,SAAS,CAAC,KAAvC,CAA6C,SAAS,CAAC,qBAAvD,EAbA,CAlCF,CADH,cAmDG,2BAAK,SAAS,CAAC,uBAAf,eACE,oBAAC,KAAD,EAAO,EAAE,CAAC,QAAV,CAAmB,IAAI,CAAC,SAAxB,CAAkC,SAAS,CAAC,mCAA5C,eACE,8BAAQ,KAAK,CAAC,EAAd,CAAiB,QAAQ,KAAzB,mBADF,cAEE,8BAAQ,KAAK,CAAC,SAAd,YAFF,CADF,cAcE,oBAAC,YAAD,EAAc,IAAI,CAAC,SAAnB,CAA6B,SAAS,CAAC,KAAvC,CAA6C,SAAS,CAAC,qBAAvD,EAdF,CAzFJ,cA0GA,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,aAA5B,6BADF,CA1GA,cA6GA,8BAAQ,SAAS,CAAC,4CAAlB,CAA+D,IAAI,CAAC,QAApE,CAA6E,QAAQ,CAAEmB,YAAvF,eACE,yCADF,cAEE,oBAAC,aAAD,EAAe,OAAO,CAAE,MAAK5C,OAAL,CAAaiD,OAArC,EAFF,CA7GA,CADF,CAoHD,C,wEAjLD,+BAAuB,CACrBpD,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,SAAzC,CAAqD,EAArD,CACD,C,sBAiLD,iBAAQ,CACN,mBACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,+CAAf,eAEE,2BAAK,SAAS,CAAC,8BAAf,eACE,2BAAK,GAAG,CAAEhB,WAAV,CAAuB,SAAS,CAAC,WAAjC,CAA6C,GAAG,CAAC,cAAjD,EADF,CAFF,cAME,2BAAK,SAAS,CAAC,gCAAf,eACE,2BAAK,SAAS,CAAC,cAAf,eACE,uCADF,CADF,cAKE,oBAAC,MAAD,EACE,aAAa,CAAE,KAAKiC,aAAL,EADjB,CAEE,gBAAgB,CAAE,KAAKU,MAFzB,CAGE,QAAQ,CAAE,KAAKU,YAHjB,CAIE,gBAAgB,CAAE,KAJpB,EAMG,KAAKK,IANR,CALF,CANF,CADF,CADF,CADF,CADF,CADF,CADF,CAkCD,C,sBAnOoB3D,S,EAsOvBU,QAAQ,CAAC0D,WAAT,CAAuB3D,WAAvB,CACA,cAAeC,CAAAA,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport loginBanner from '../../assets/images/login-banner.png';\nimport { Link } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as yup from 'yup';\nimport ActionLoading from \"../loading/actionloading\";\nimport { UserContext } from \"../../context/user\";\n\nclass Register extends Component {\n\tstate = {\n    subCategories: [],\n    isEmployee: true,\n  }\n\n   componentDidMount = async () => {\n    document.getElementsByTagName('body')[0].className = 'account-page';\n\n     await this.context.getCategories();\n     await this.context.getCountries();\n  }\n\n  componentWillUnmount() {\n    document.getElementsByTagName('body')[0].className = '';\n  }\n\n  checkUserType = (event) => {\n    const {value} = event.target;\n    if(value===\"2\"){\n      this.setState({isEmployee: true});\n    } else if(value===\"1\"){\n      this.setState({isEmployee: false});\n    }\n  }\n\n  changeCtegory = (event) => {\n    console.log(event.target.value)\n\t\tthis.setState({\n      subCategories : this.context.categories.find(cntry => cntry.id == event.target.value).sub_category\n    });\n  }\n\n  initialValues = () => {\n    return (\n      {\n        name: \"\",\n        type: \"\",\n        email: \"\",\n        mobile: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        category: \"\",\n        subCategory: \"\",\n        country: \"\",\n      }\n    )\n  }\n\n  schema = () => {\n    const phoneRegExp = /^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/\n    const schema =  yup.object().shape({\n      name: yup.string().required(\"Required\"),\n      type: yup.number().required(\"Required\"),\n      email: yup.string().email(\"Invalid email format\").required(\"Required\"),\n      mobile: yup.string().matches(phoneRegExp, 'Mobile number is not valid').required(\"Required\"),\n      password: yup.string().required(\"Required\"),\n      confirmPassword: yup.string().oneOf([yup.ref('password'), null], 'Passwords must match').required(\"Required\"),\n      country: yup.string().required(\"Required\"),\n    });\n    return schema;\n  }\n\n  handleSubmit = async (values) => {\n    console.log(values);\n    const {category, subCategory, country} = values;\n    const {userRegister} = this.context;\n    console.log(values);\n    await userRegister({...values, country_id: country, category_id: category, sub_category: subCategory});\n  };\n\n\tform = (props) => {\n     const {handleChange, isSubmitting} = props;\n     // setFieldValue(\"type\", e.target.value)\n    return (\n      <Form>\n        <div className=\"form-row\">\n          <div className=\"form-group form-focus col-md-6\">\n              <Field name=\"name\" type=\"text\" className=\"form-control floating\" placeholder=\"Name\" />\n              <ErrorMessage name=\"name\" component=\"div\" className=\"text-danger text-xs\" />\n          </div>\n          <div className=\"form-group form-focus col-md-6\">\n            <Field name=\"type\" as=\"select\" className=\"form-control floating placeholder\"\n              onChange={(e)=>{this.checkUserType(e); handleChange(e)}}\n            >\n              <option value=\"\"  disabled>Employer/Employee</option>\n              <option value=\"1\">Employer</option>\n              <option value=\"2\">Employee</option>\n            </Field>\n            <ErrorMessage name=\"type\" component=\"div\" className=\"text-danger text-xs\" />\n          </div>\n        </div>\n\n\t\t\t<div className=\"form-row\">\n\t\t\t\t<div className=\"form-group form-focus col-md-6\">\n\t\t\t\t\t<Field name=\"email\" type=\"email\" className=\"form-control floating\" placeholder=\"Email\" />\n\t\t\t\t\t<ErrorMessage name=\"email\" component=\"div\" className=\"text-danger text-xs\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-group form-focus col-md-6\">\n\t\t\t\t\t<Field name=\"mobile\" type=\"tel\" className=\"form-control floating\" placeholder=\"Mobile\" />\n\t\t\t\t\t<ErrorMessage name=\"mobile\" component=\"div\" className=\"text-danger text-xs\" />\n\t\t\t\t</div>\n\t\t\t</div>\n      <div className=\"form-row\">\n        <div className=\"form-group form-focus col-md-6\">\n          <Field name=\"password\" type=\"password\" className=\"form-control floating\" placeholder=\"Create Password\" />\n          <ErrorMessage name=\"password\" component=\"div\" className=\"text-danger text-xs\" />\n        </div>\n        <div className=\"form-group form-focus col-md-6\">\n          <Field name=\"confirmPassword\" type=\"password\" className=\"form-control floating\" placeholder=\"Confirm Password\" />\n          <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-danger text-xs\" />\n        </div>\n      </div>\n      {this.state.isEmployee\n        ? <>\n            <div className=\"form-row\">\n              <div className=\"form-group form-focus col-md-6\">\n                <Field as=\"select\" name=\"category\" className=\"form-control floating placeholder\"\n                  onChange={(e)=>{this.changeCtegory(e); handleChange(e)}}\n                >\n                  <option value=\"\" disabled>Select Category</option>\n                  {\n                    this.context.categories.map((category) => {\n                      return (\n                        <option key={category.id} value={category.id}>\n                          {category.name}\n                        </option>\n                      );\n                    })\n                  }\n                </Field>\n                <ErrorMessage name=\"category\" component=\"div\" className=\"text-danger text-xs\" />\n              </div>\n              <div className=\"form-group form-focus col-md-6\">\n                <Field as=\"select\" name=\"subCategory\" className=\"form-control floating placeholder\">\n                  <option value=\"\" disabled>Select Sub Category</option>\n                  {\n                    this.state.subCategories.map(subCategory => {\n                      return (\n                        <option key={subCategory.id} value={subCategory.id}>\n                          {subCategory.name}\n                        </option>\n                      );\n                    })\n                  }\n                </Field>\n              </div>\n            </div>\n            <div className=\"form-group form-focus\">\n            <Field as=\"select\" name=\"country\" className=\"form-control floating placeholder\">\n              <option value=\"\" disabled>Select Country</option>\n              {\n                this.context.countries.map((country, index) => {\n                  return (\n                    <option key={index} value={country}>\n                      {country}\n                    </option>\n                  );\n                })\n              }\n            </Field>\n            <ErrorMessage name=\"country\" component=\"div\" className=\"text-danger text-xs\" />\n          </div>\n          </>\n        : <div className=\"form-group form-focus\">\n            <Field as=\"select\" name=\"country\" className=\"form-control floating placeholder\">\n              <option value=\"\" disabled>Select Country</option>\n              <option value=\"Germany\">Germany</option>\n              {/* {\n                this.context.countries.map((country, index) => {\n                  return (\n                    <option key={index} value={country}>\n                      {country}\n                    </option>\n                  );\n                })\n              } */}\n            </Field>\n            <ErrorMessage name=\"country\" component=\"div\" className=\"text-danger text-xs\" />\n          </div>\n      }\n      <div className=\"text-right\">\n        <Link to=\"/login\" className=\"forgot-link\">Already have an account?</Link>\n      </div>\n      <button className=\"btn btn-primary btn-block btn-lg login-btn\" type=\"submit\" disabled={isSubmitting}>\n        <span>Signup</span>\n        <ActionLoading loading={this.context.loading} />\n      </button>\n      </Form>\n    );\n  }\n\n  render(){\n    return(\n      <div className=\"content\">\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-md-10 offset-md-1\">\n              <div className=\"account-content\">\n                <div className=\"row align-items-center justify-content-center\">\n\n                  <div className=\"col-md-7 col-lg-5 login-left\">\n                    <img src={loginBanner} className=\"img-fluid\" alt=\"Login Banner\" />\n                  </div>\n\n                  <div className=\"col-md-12 col-lg-7 login-right\">\n                    <div className=\"login-header\">\n                      <h3>Signup</h3>\n                    </div>\n\n                    <Formik\n                      initialValues={this.initialValues()}\n                      validationSchema={this.schema}\n                      onSubmit={this.handleSubmit}\n                      validateOnChange={false}\n                    >\n                      {this.form}\n                    </Formik>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nRegister.contextType = UserContext;\nexport default Register;"]},"metadata":{},"sourceType":"module"}