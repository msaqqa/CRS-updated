{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useContext,useState,useEffect}from'react';import{Link,useParams}from'react-router-dom';import{Modal}from'react-bootstrap';import{IMG01}from'../img.jsx';// context\nimport{JobConsumer,JobContext}from\"../../../context/jobs\";// react CKEditor text editor\nimport{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import ReactHtmlParser from'react-html-parser';import moment from\"moment\";import PageLoading from\"../../loading/pageloading\";function SingleJob(){// context values\nvar _useContext=useContext(JobContext),getSingleJob=_useContext.getSingleJob,singleJob=_useContext.singleJob,setProposalJob=_useContext.setProposalJob,loading=_useContext.loading;var id=singleJob.id,image=singleJob.image,title=singleJob.title,category=singleJob.category,employer=singleJob.employer,created_at=singleJob.created_at,finish_at=singleJob.finish_at,details=singleJob.details,requirements=singleJob.requirements,responsibility=singleJob.responsibility;category=category?_objectSpread({},category):{};employer=employer?_objectSpread({},employer):{};var imageUrl=image?\"http://excodeteam.com/crs/public/images/\".concat(image):IMG01;// state values\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),coverLetter=_useState2[0],setCoverLetter=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),disabled=_useState4[0],setDisabled=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),titleText=_useState6[0],setTitleText=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEmployee=_useState8[0],setIsEmployee=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),activeModal=_useState10[0],setActiveModal=_useState10[1];var pageId=useParams().id;useEffect(function(){getSingleJob(pageId);var user=JSON.parse(localStorage.getItem('user'));if(user&&user.type===\"1\"){setDisabled(true);setTitleText(\"You should post as an employee only\");}},[]);var checkUserMember=function checkUserMember(){var user=JSON.parse(localStorage.getItem('user'));if(user&&user.type===\"2\"){setIsEmployee(true);openModal('postProposal');}else{setIsEmployee(false);openModal('postProposal');}};var openModal=function openModal(id){setActiveModal(id);};var closeModal=function closeModal(){setActiveModal(false);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var isEmpty;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();isEmpty=!coverLetter;if(!isEmpty){_context.next=6;break;}return _context.abrupt(\"return\",false);case 6:_context.next=8;return setProposalJob(id,coverLetter);case 8:closeModal();case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"breadcrumb-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-12\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"breadcrumb\",className:\"page-breadcrumb\"},/*#__PURE__*/React.createElement(\"ol\",{className:\"breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\"},\"Home\")),/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\"},\"Job Details\"))),/*#__PURE__*/React.createElement(\"h2\",{className:\"breadcrumb-title\"},\"Job Details\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},loading?/*#__PURE__*/React.createElement(PageLoading,{loading:loading}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"doctor-widget\"},/*#__PURE__*/React.createElement(\"div\",{className:\"doc-info-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"doctor-img\"},/*#__PURE__*/React.createElement(\"img\",{src:imageUrl,className:\"img-fluid\",alt:\"User\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"doc-info-cont\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"doc-name\"},title),/*#__PURE__*/React.createElement(\"div\",{className:\"clini-infos mb-0\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-sketch\"}),\" \",category.name),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-black-tie\"}),\" By \",employer.name),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-start\"}),\" \",moment(created_at).format(\"YYYY-MM-DD\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-end\"}),\" \",moment(finish_at).format(\"YYYY-MM-DD\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"doc-info-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"clinic-booking\"},/*#__PURE__*/React.createElement(\"div\",{className:\"clinic-booking\"},/*#__PURE__*/React.createElement(\"button\",{title:titleText,className:disabled?'bg-warning-light':'apt-btn',disabled:disabled,onClick:checkUserMember},\"Post Proposal\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-9\"},/*#__PURE__*/React.createElement(\"div\",{className:\"widget about-widget\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"widget-title\"},\"Description\"),/*#__PURE__*/React.createElement(\"article\",null,ReactHtmlParser(details))),/*#__PURE__*/React.createElement(\"div\",{className:\"widget education-widget\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"widget-title\"},\"Requirements\"),/*#__PURE__*/React.createElement(\"div\",{className:\"experience-box\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"experience-list\"},requirements&&requirements.length>0?requirements.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"experience-user\"},/*#__PURE__*/React.createElement(\"div\",{className:\"before-circle\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"experience-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-content\"},/*#__PURE__*/React.createElement(\"p\",null,item))));}):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"widget experience-widget\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"widget-title\"},\"Responsibilities\"),/*#__PURE__*/React.createElement(\"div\",{className:\"experience-box\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"experience-list\"},responsibility&&responsibility.length>0?responsibility.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"experience-user\"},/*#__PURE__*/React.createElement(\"div\",{className:\"before-circle\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"experience-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-content\"},/*#__PURE__*/React.createElement(\"p\",null,item))));}):null)))))))),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",show:activeModal===\"postProposal\",onHide:closeModal,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,title)),/*#__PURE__*/React.createElement(Modal.Body,null,isEmployee?/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cover Letter\"),/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,onChange:function onChange(e,editor){return setCoverLetter(editor.getData());}})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary mr-2\",onClick:function onClick(e){return handleSubmit(e);}},\"Send\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:closeModal},\"Cancel\")):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"You must be logged in to make a proposal\"),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"btn btn-primary mr-2\"},\"Login\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:closeModal},\"Cancel\")))))));}export default SingleJob;","map":{"version":3,"sources":["E:/CSR-master/src/client/components/jobs/singlejob/index.jsx"],"names":["React","useContext","useState","useEffect","Link","useParams","Modal","IMG01","JobConsumer","JobContext","CKEditor","ClassicEditor","ReactHtmlParser","moment","PageLoading","SingleJob","getSingleJob","singleJob","setProposalJob","loading","id","image","title","category","employer","created_at","finish_at","details","requirements","responsibility","imageUrl","coverLetter","setCoverLetter","disabled","setDisabled","titleText","setTitleText","isEmployee","setIsEmployee","activeModal","setActiveModal","pageId","user","JSON","parse","localStorage","getItem","type","checkUserMember","openModal","closeModal","handleSubmit","e","preventDefault","isEmpty","name","format","length","map","item","index","editor","getData"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { Modal } from 'react-bootstrap';\r\nimport { IMG01 } from '../img.jsx';\r\n// context\r\nimport { JobConsumer, JobContext } from \"../../../context/jobs\";\r\n// react CKEditor text editor\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport ReactHtmlParser from 'react-html-parser';\r\nimport moment from \"moment\";\r\nimport PageLoading from \"../../loading/pageloading\"\r\n\r\nfunction SingleJob() {\r\n\r\n  // context values\r\n  const { getSingleJob, singleJob, setProposalJob, loading } = useContext(JobContext);\r\n  let { id, image, title, category, employer, created_at, finish_at, details, requirements, responsibility } = singleJob;\r\n  category = category ? { ...category } : {};\r\n  employer = employer ? { ...employer } : {};\r\n  const imageUrl = image ? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\r\n\r\n  // state values\r\n  const [coverLetter, setCoverLetter] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(null);\r\n  const [titleText, setTitleText] = useState(\"\");\r\n  const [isEmployee, setIsEmployee] = useState(false);\r\n  const [activeModal, setActiveModal] = useState(null);\r\n\r\n\r\n  const pageId = useParams().id;\r\n\r\n  useEffect(() => {\r\n    getSingleJob(pageId);\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    if (user && user.type === \"1\") {\r\n      setDisabled(true);\r\n      setTitleText(\"You should post as an employee only\");\r\n    }\r\n  }, [])\r\n\r\n  const checkUserMember = () => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    if (user && user.type === \"2\") {\r\n      setIsEmployee(true);\r\n      openModal('postProposal');\r\n    } else {\r\n      setIsEmployee(false);\r\n      openModal('postProposal');\r\n    }\r\n  }\r\n\r\n  const openModal = (id) => {\r\n    setActiveModal(id);\r\n  }\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEmpty = !coverLetter;\r\n    if (isEmpty) {\r\n      return false;\r\n    } else {\r\n      await setProposalJob(id, coverLetter);\r\n      closeModal();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"breadcrumb-bar\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-md-12 col-12\">\r\n              <nav aria-label=\"breadcrumb\" className=\"page-breadcrumb\">\r\n                <ol className=\"breadcrumb\">\r\n                  <li className=\"breadcrumb-item\"><Link to=\"/home\">Home</Link></li>\r\n                  <li className=\"breadcrumb-item active\" aria-current=\"page\">Job Details</li>\r\n                </ol>\r\n              </nav>\r\n              <h2 className=\"breadcrumb-title\">Job Details</h2>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"content\">\r\n        <div className=\"container\">\r\n\r\n          {\r\n            loading ? <PageLoading loading={loading} /> :\r\n              <>\r\n                <div className=\"card\">\r\n                  <div className=\"card-body\">\r\n                    <div className=\"doctor-widget\">\r\n                      <div className=\"doc-info-left\">\r\n                        <div className=\"doctor-img\">\r\n                          <img src={imageUrl} className=\"img-fluid\" alt=\"User\" />\r\n                        </div>\r\n                        <div className=\"doc-info-cont\">\r\n                          <h4 className=\"doc-name\">{title}</h4>\r\n                          <div className=\"clini-infos mb-0\">\r\n                            <ul>\r\n                              <li><i className=\"fab fa-sketch\"></i> {category.name}</li>\r\n                              <li><i className=\"fab fa-black-tie\"></i> By {employer.name}</li>\r\n                              <li><i className=\"fas fa-hourglass-start\"></i> {moment(created_at).format(\"YYYY-MM-DD\")}</li>\r\n                              <li><i className=\"fas fa-hourglass-end\"></i> {moment(finish_at).format(\"YYYY-MM-DD\")}</li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"doc-info-right\">\r\n                        <div className=\"clinic-booking\">\r\n                          <div className=\"clinic-booking\">\r\n                            <button title={titleText} className={disabled ? 'bg-warning-light' : 'apt-btn'} disabled={disabled} onClick={checkUserMember}>Post Proposal</button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"card\">\r\n                  <div className=\"card-body\">\r\n\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-12 col-lg-9\">\r\n\r\n                        <div className=\"widget about-widget\">\r\n                          <h4 className=\"widget-title\">Description</h4>\r\n                          <article>{ReactHtmlParser(details)}</article>\r\n                        </div>\r\n\r\n                        <div className=\"widget education-widget\">\r\n                          <h4 className=\"widget-title\">Requirements</h4>\r\n                          <div className=\"experience-box\">\r\n                            <ul className=\"experience-list\">\r\n                              {\r\n                                (requirements && requirements.length > 0) ? requirements.map((item, index) => {\r\n                                  return (\r\n                                    <li key={index}>\r\n                                      <div className=\"experience-user\">\r\n                                        <div className=\"before-circle\"></div>\r\n                                      </div>\r\n                                      <div className=\"experience-content\">\r\n                                        <div className=\"timeline-content\">\r\n                                          <p>{item}</p>\r\n                                        </div>\r\n                                      </div>\r\n                                    </li>\r\n                                  )\r\n                                }) : null\r\n                              }\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"widget experience-widget\">\r\n                          <h4 className=\"widget-title\">Responsibilities</h4>\r\n                          <div className=\"experience-box\">\r\n                            <ul className=\"experience-list\">\r\n                              {\r\n                                (responsibility && responsibility.length > 0) ? responsibility.map((item, index) => {\r\n                                  return (\r\n                                    <li key={index}>\r\n                                      <div className=\"experience-user\">\r\n                                        <div className=\"before-circle\"></div>\r\n                                      </div>\r\n                                      <div className=\"experience-content\">\r\n                                        <div className=\"timeline-content\">\r\n                                          <p>{item}</p>\r\n                                        </div>\r\n                                      </div>\r\n                                    </li>\r\n                                  )\r\n                                }) : null\r\n                              }\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n                </div>\r\n              </>\r\n          }\r\n          {/*view modal*/}\r\n          <Modal size=\"lg\" show={activeModal === \"postProposal\"} onHide={closeModal} centered>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>{title}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              {\r\n                isEmployee ?\r\n                  <form>\r\n                    <div className=\"form-group\">\r\n                      <label>Cover Letter</label>\r\n                      <CKEditor\r\n                        editor={ClassicEditor}\r\n                        onChange={(e, editor) => setCoverLetter(editor.getData())}\r\n                      />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary mr-2\" onClick={(e) => handleSubmit(e)}>Send</button>\r\n                    <button type=\"button\" className=\"btn btn-light\" onClick={closeModal}>Cancel</button>\r\n                  </form>\r\n                  :\r\n                  <>\r\n                    <p>You must be logged in to make a proposal</p>\r\n                    <Link to=\"/login\" className=\"btn btn-primary mr-2\">Login</Link>\r\n                    <button type=\"button\" className=\"btn btn-light\" onClick={closeModal}>Cancel</button>\r\n                  </>\r\n              }\r\n            </Modal.Body>\r\n          </Modal>\r\n\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SingleJob;"]},"metadata":{},"sourceType":"module"}