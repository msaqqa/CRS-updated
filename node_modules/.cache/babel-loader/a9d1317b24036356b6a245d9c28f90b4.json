{"ast":null,"code":"import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import{Modal}from'react-bootstrap';//images\nimport{IMG01}from'./img.jsx';//components\nimport JobSearch from'./search';import SubCategories from'./subcategories';import RecentJobs from'./recentjobs';import JobsCategories from'./jobscategories';import TagsWidget from'./tagswidget';// react CKEditor text editor\nimport{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';// context\nimport{JobConsumer,JobContext}from\"../../context/jobs\";import ReactHtmlParser,{convertNodeToElement}from'react-html-parser';import moment from\"moment\";import PageLoading from\"../loading/pageloading\";var JobsList=/*#__PURE__*/function(_Component){_inherits(JobsList,_Component);var _super=_createSuper(JobsList);function JobsList(){var _this;_classCallCheck(this,JobsList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={show:false,disabled:null,titleText:\"\",coverLetter:\"\",jobTitle:\"\",jobId:\"\",isEmployee:false,isPosted:false};_this.componentDidMount=function(){var user=JSON.parse(localStorage.getItem('user'));if(user&&user.type==1){_this.setState({disabled:true,titleText:\"You should post as an employee only\"});}};_this.handleSingleJob=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var getSingleJob;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getSingleJob=_this.context.getSingleJob;_context.next=3;return getSingleJob(id);case 3:_this.props.history.push(\"/jobs/single-job/\".concat(id));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleClose=function(){_this.setState({show:false});};_this.checkUserMember=function(){var user=JSON.parse(localStorage.getItem('user'));if(user){_this.setState({isEmployee:true});}else{_this.setState({isEmployee:false});}};_this.handleShow=function(id,title){_this.checkUserMember();_this.setState({show:true,jobId:id,jobTitle:title});};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this$state,jobId,coverLetter,setProposalJob,isEmpty;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_this$state=_this.state,jobId=_this$state.jobId,coverLetter=_this$state.coverLetter;setProposalJob=_this.context.setProposalJob;isEmpty=!coverLetter;if(!isEmpty){_context2.next=8;break;}return _context2.abrupt(\"return\",false);case 8:_context2.next=10;return setProposalJob(jobId,coverLetter);case 10:_this.handleClose();case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.transform=function(node){node.name='span';return convertNodeToElement(node);};return _this;}_createClass(JobsList,[{key:\"render\",value:function render(){var _this2=this;var transform=this.transform;var _this$context$categor=this.context.categories,categoryName=_this$context$categor.categoryName,categoryType=_this$context$categor.categoryType;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"breadcrumb-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-12\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"breadcrumb\",className:\"page-breadcrumb\"},/*#__PURE__*/React.createElement(\"ol\",{className:\"breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\"},\"Home\")),/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\"},\"Jobs\"),categoryName&&/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\"},categoryName))),categoryName?/*#__PURE__*/React.createElement(\"h2\",{className:\"breadcrumb-title\"},categoryName):/*#__PURE__*/React.createElement(\"h2\",{className:\"breadcrumb-title\"},\"Jobs\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-12\"},/*#__PURE__*/React.createElement(JobConsumer,null,function(value){var categories=value.categories,getSingleJob=value.getSingleJob,loading=value.loading;var categoryJobs=categories.categoryJobs;if(loading){return/*#__PURE__*/React.createElement(PageLoading,null);}return categoryJobs&&categoryJobs.length>0?categoryJobs.map(function(job,index){var image=job.image,id=job.id,title=job.title,details=job.details,category=job.category,employer=Object.assign({},job.employer),created_at=job.created_at,finish_at=job.finish_at;var categoryObj=category?_objectSpread({},category):{};var finishAt=!finish_at||finish_at===\"0000-00-00 00:00:00\"?new Date():new Date(finish_at);var imageUrl=image?\"http://excodeteam.com/crs/public/images/\".concat(image):IMG01;return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"booking-doc-info\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"booking-doc-img\",onClick:function onClick(){return _this2.handleSingleJob(id);}},/*#__PURE__*/React.createElement(\"img\",{src:imageUrl,alt:\"User\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"booking-info\"},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return _this2.handleSingleJob(id);}},title)),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-2\"},ReactHtmlParser(details.substring(0,200),{transform:transform}),/*#__PURE__*/React.createElement(Link,{to:\"/jobs/single-job/\".concat(id)},\"\\u2026 See more\")),/*#__PURE__*/React.createElement(\"ul\",{className:\"entry-meta meta-item\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-sketch\"}),\" \",categoryObj.name),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-black-tie\"}),\" By \",employer.name),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-start\"}),\" \",moment(created_at).format(\"YYYY-MM-DD\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-end\"}),\" \",moment(finishAt).format(\"YYYY-MM-DD\")),/*#__PURE__*/React.createElement(\"li\",{title:_this2.state.titleText},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-info\",disabled:_this2.state.disabled,onClick:function onClick(){return _this2.handleShow(id,title);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-file-signature\"}),\" Post Proposal\")))))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-list text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert mb-0\"},\"No results for this search\"));}),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",show:this.state.show,onHide:this.handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,this.state.jobTitle)),/*#__PURE__*/React.createElement(Modal.Body,null,this.state.isEmployee?/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cover Letter\"),/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,onChange:function onChange(e,editor){return _this2.setState({coverLetter:editor.getData()});}})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary mr-2\",onClick:function onClick(e){return _this2.handleSubmit(e);}},\"Send\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){return _this2.handleClose();}},\"Cancel\")):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"You must be logged in to make a proposal\"),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"btn btn-primary mr-2\"},\"Login\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){return _this2.handleClose();}},\"Cancel\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-12 sidebar-right theiaStickySidebar\"},/*#__PURE__*/React.createElement(JobSearch,null),!categoryType&&/*#__PURE__*/React.createElement(SubCategories,null),/*#__PURE__*/React.createElement(RecentJobs,null),/*#__PURE__*/React.createElement(JobsCategories,null),/*#__PURE__*/React.createElement(TagsWidget,null))))));}}]);return JobsList;}(Component);JobsList.contextType=JobContext;export default JobsList;","map":{"version":3,"sources":["E:/CSR-master/src/client/components/jobs/index.jsx"],"names":["React","Component","Link","Modal","IMG01","JobSearch","SubCategories","RecentJobs","JobsCategories","TagsWidget","CKEditor","ClassicEditor","JobConsumer","JobContext","ReactHtmlParser","convertNodeToElement","moment","PageLoading","JobsList","state","show","disabled","titleText","coverLetter","jobTitle","jobId","isEmployee","isPosted","componentDidMount","user","JSON","parse","localStorage","getItem","type","setState","handleSingleJob","id","getSingleJob","context","props","history","push","handleClose","checkUserMember","handleShow","title","handleSubmit","e","preventDefault","setProposalJob","isEmpty","transform","node","name","categories","categoryName","categoryType","value","loading","categoryJobs","length","map","job","index","image","details","category","employer","created_at","finish_at","categoryObj","finishAt","Date","imageUrl","substring","format","editor","getData","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Modal } from 'react-bootstrap';\n//images\nimport { IMG01 } from './img.jsx';\n//components\nimport JobSearch from './search';\nimport SubCategories from './subcategories';\nimport RecentJobs from './recentjobs';\nimport JobsCategories from './jobscategories';\nimport TagsWidget from './tagswidget';\n// react CKEditor text editor\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n// context\nimport { JobConsumer, JobContext } from \"../../context/jobs\";\nimport ReactHtmlParser, { convertNodeToElement } from 'react-html-parser';\nimport moment from \"moment\";\nimport PageLoading from \"../loading/pageloading\";\n\nclass JobsList extends Component {\n\n  state = {\n    show: false,\n    disabled: null,\n    titleText: \"\",\n    coverLetter: \"\",\n    jobTitle: \"\",\n    jobId: \"\",\n    isEmployee: false,\n    isPosted: false,\n  }\n\n  componentDidMount = () => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user && user.type == 1) {\n      this.setState({\n        disabled: true,\n        titleText: \"You should post as an employee only\"\n      });\n    }\n  }\n\n  handleSingleJob = async (id) => {\n    const { getSingleJob } = this.context;\n    await getSingleJob(id);\n    this.props.history.push(`/jobs/single-job/${id}`);\n  }\n\n  handleClose = () => {\n    this.setState({\n      show: false\n    });\n  }\n\n  checkUserMember = () => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user) {\n      this.setState({\n        isEmployee: true,\n      });\n    } else {\n      this.setState({\n        isEmployee: false,\n      });\n    }\n  }\n\n  handleShow = (id, title) => {\n    this.checkUserMember();\n    this.setState({\n      show: true,\n      jobId: id,\n      jobTitle: title\n    });\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const { jobId, coverLetter } = this.state;\n    const { setProposalJob } = this.context;\n    const isEmpty = !coverLetter;\n    if (isEmpty) {\n      return false;\n    } else {\n      await setProposalJob(jobId, coverLetter);\n      this.handleClose();\n    }\n  }\n\n  transform = (node) => {\n    node.name = 'span';\n    return convertNodeToElement(node);\n  }\n\n  render() {\n    const transform = this.transform;\n    const { categoryName, categoryType } = this.context.categories;\n\n    return (\n      <div>\n        <div className=\"breadcrumb-bar\">\n          <div className=\"container-fluid\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-md-12 col-12\">\n                <nav aria-label=\"breadcrumb\" className=\"page-breadcrumb\">\n                  <ol className=\"breadcrumb\">\n                    <li className=\"breadcrumb-item\"><Link to=\"/home\">Home</Link></li>\n                    <li className=\"breadcrumb-item active\" aria-current=\"page\">Jobs</li>\n                    {categoryName &&\n                      <li className=\"breadcrumb-item active\" aria-current=\"page\">{categoryName}</li>\n                    }\n                  </ol>\n                </nav>\n                {categoryName ?\n                  <h2 className=\"breadcrumb-title\">{categoryName}</h2> :\n                  <h2 className=\"breadcrumb-title\">Jobs</h2>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"content\">\n          <div className=\"container\">\n            <div className=\"row\">\n\n              <div className=\"col-lg-8 col-md-12\">\n                <JobConsumer>\n                  {(value) => {\n                    const { categories, getSingleJob, loading } = value;\n                    const { categoryJobs } = categories;\n                    if (loading) {\n                      return <PageLoading />\n                    }\n                    return (categoryJobs && categoryJobs.length > 0) ? (categoryJobs.map((job, index) => {\n                      const { image, id, title, details, category, employer: { ...employer }, created_at, finish_at } = job;\n                      const categoryObj = category ? { ...category } : {};\n                      const finishAt = (!finish_at || finish_at === \"0000-00-00 00:00:00\") ? new Date() : new Date(finish_at);\n                      const imageUrl = image ? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\n                      return (\n                        <div key={index} className=\"card\">\n                          <div className=\"card-body\">\n                            <div className=\"booking-doc-info\">\n                              <Link to=\"#\" className=\"booking-doc-img\" onClick={() => this.handleSingleJob(id)}>\n                                <img src={imageUrl} alt=\"User\" />\n                              </Link>\n                              <div className=\"booking-info\">\n                                <h4><Link onClick={() => this.handleSingleJob(id)}>{title}</Link></h4>\n                                <p className=\"mb-2\">\n                                  {ReactHtmlParser(details.substring(0, 200), { transform })}\n                                  <Link to={`/jobs/single-job/${id}`}>… See more</Link>\n                                </p>\n                                <ul className=\"entry-meta meta-item\">\n                                  <li><i className=\"fab fa-sketch\"></i> {categoryObj.name}</li>\n                                  <li><i className=\"fab fa-black-tie\"></i> By {employer.name}</li>\n                                  <li><i className=\"fas fa-hourglass-start\"></i> {moment(created_at).format(\"YYYY-MM-DD\")}</li>\n                                  <li><i className=\"fas fa-hourglass-end\"></i> {moment(finishAt).format(\"YYYY-MM-DD\")}</li>\n                                  <li title={this.state.titleText}>\n                                    <Link to=\"#\" className=\"text-info\" disabled={this.state.disabled} onClick={() => this.handleShow(id, title)}>\n                                      <i className=\"fas fa-file-signature\"></i> Post Proposal\n                                    </Link>\n                                  </li>\n                                </ul>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      )\n                    })) : (\n                      <div className=\"appointment-list text-center\">\n                        <div className=\"alert mb-0\" >\n                          No results for this search\n                        </div>\n                      </div>\n                    )\n                  }}\n                </JobConsumer>\n\n                {/*view modal*/}\n                <Modal size=\"lg\" show={this.state.show} onHide={this.handleClose} centered>\n                  <Modal.Header closeButton>\n                    <Modal.Title>{this.state.jobTitle}</Modal.Title>\n                  </Modal.Header>\n                  <Modal.Body>\n                    {this.state.isEmployee\n                      ? <form>\n                        <div className=\"form-group\">\n                          <label>Cover Letter</label>\n                          <CKEditor\n                            editor={ClassicEditor}\n                            onChange={(e, editor) => this.setState({ coverLetter: editor.getData() })}\n                          />\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-primary mr-2\" onClick={(e) => this.handleSubmit(e)}>Send</button>\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.handleClose()}>Cancel</button>\n                      </form>\n                      : <>\n                        <p>You must be logged in to make a proposal</p>\n                        <Link to=\"/login\" className=\"btn btn-primary mr-2\">Login</Link>\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.handleClose()}>Cancel</button>\n                      </>\n                    }\n                  </Modal.Body>\n                </Modal>\n\n              </div>\n\n              <div className=\"col-lg-4 col-md-12 sidebar-right theiaStickySidebar\">\n                <JobSearch />\n                {!categoryType && <SubCategories />}\n                <RecentJobs />\n                <JobsCategories />\n                <TagsWidget />\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nJobsList.contextType = JobContext\nexport default JobsList;"]},"metadata":{},"sourceType":"module"}