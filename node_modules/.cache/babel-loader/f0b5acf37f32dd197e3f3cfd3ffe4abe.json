{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import StickyBox from\"react-sticky-box\";import DoctorSidebar from'../sidebar';import{Link,useHistory}from'react-router-dom';import{Tabs,Tab}from'react-bootstrap';import{Table}from\"antd\";import'antd/dist/antd.css';import{Modal}from'react-bootstrap';import{itemRender,onShowSizeChange}from\"../paginationfunction\";import{IMG01}from'./img';// context\nimport{EmployerContext}from\"../../../context/employer\";import ReactHtmlParser,{convertNodeToElement}from'react-html-parser';import moment from\"moment\";import PageLoading from\"../../loading/pageloading\";function Appointments(){var history=useHistory();// context values\nvar _useContext=useContext(EmployerContext),getEmployerJobs=_useContext.getEmployerJobs,employerJobs=_useContext.employerJobs,getJobWithProposals=_useContext.getJobWithProposals,closeJob=_useContext.closeJob,openJob=_useContext.openJob,processJob=_useContext.processJob,loading=_useContext.loading;var open=employerJobs.open,close=employerJobs.close,coplete=employerJobs.coplete,processed=employerJobs.processed;// state values\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),key=_useState2[0],setKey=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),activeModal=_useState4[0],setActiveModal=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),action=_useState6[0],setAction=_useState6[1];var handleSelect=function handleSelect(key){setKey(key);};useEffect(function(){getEmployerJobs();},[]);// const handleSingleJob = async (id) => {\n//   await getJobWithProposals(id);\n//   history.push(\"/employer/jobs/single-job\");\n// }\nvar handleJobProposals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getJobWithProposals(id);case 2:history.push(\"/employer/jobs/cover-letters\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleJobProposals(_x){return _ref.apply(this,arguments);};}();var transform=function transform(node){node.name='span';return convertNodeToElement(node);};var openModal=function openModal(id){setActiveModal(id);};var handleCloseModal=function handleCloseModal(){setActiveModal(false);};var handleActionBtn=function handleActionBtn(name,func){openModal('action');setAction({name:name,func:func});};var columns=[{title:\"Job Title\",dataIndex:\"title\",render:function render(title,_ref2){var id=_ref2.id,image=_ref2.image;var imageUrl=image?\"http://excodeteam.com/crs/public/images/\".concat(image):IMG01;return/*#__PURE__*/React.createElement(\"div\",{className:\"table-avatar\"},/*#__PURE__*/React.createElement(Link,{to:\"/employer/jobs/single-job/\".concat(id),className:\"avatar avatar-sm mr-2\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:imageUrl})),/*#__PURE__*/React.createElement(Link,{to:\"/employer/jobs/single-job/\".concat(id)},title));},sorter:function sorter(a,b){return a.title.length-b.title.length;}},// {\n//   title: \"Details\",\n//   dataIndex: \"details\",\n//   render: (details) => (ReactHtmlParser(details, {transform})),\n//   sorter: (a, b) => a.details.length - b.details.length,\n// },\n{title:\"Category\",dataIndex:\"category\",render:function render(category){return category?category.name:null;},sorter:function sorter(a,b){return a.category.name.length-b.category.name.length;}},{title:\"Posted At\",dataIndex:\"created_at\",render:function render(date){return moment(date).format(\"YYYY-MM-DD\");},sorter:function sorter(a,b){return a.created_at.length-b.created_at.length;}},{dataIndex:\"status\",className:\"text-right\",render:function render(status,_ref3){var id=_ref3.id,proposals_count=_ref3.proposals_count;return/*#__PURE__*/React.createElement(\"div\",{className:\"appointments\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-action\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"btn btn-sm bg-info-light\",onClick:function onClick(){return handleJobProposals(id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-eye\"}),\" Proposals (\",proposals_count,\")\"),status===\"0\"?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-danger-light\",onClick:function onClick(){return handleActionBtn(\"Close\",function(){return closeJob(id);});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"}),\" Close\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-primary-light\",onClick:function onClick(){return handleActionBtn(\"Process\",function(){return processJob(id);});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-end\"}),\" Process\")):status===\"1\"?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-success-light\",onClick:function onClick(){return handleActionBtn(\"Open\",function(){return openJob(id);});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock-open\"}),\" Open\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm bg-primary-light\",onClick:function onClick(){return handleActionBtn(\"Process\",function(){return processJob(id);});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hourglass-end\"}),\" Process\")):null));}}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"breadcrumb-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-12\"},/*#__PURE__*/React.createElement(\"nav\",{\"aria-label\":\"breadcrumb\",className:\"page-breadcrumb\"},/*#__PURE__*/React.createElement(\"ol\",{className:\"breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\"},\"Home\")),/*#__PURE__*/React.createElement(\"li\",{className:\"breadcrumb-item\"},/*#__PURE__*/React.createElement(Link,{to:\"/employer/jobs\"},\"Jobs\")))),/*#__PURE__*/React.createElement(\"h2\",{className:\"breadcrumb-title\"},\"Job\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\"},/*#__PURE__*/React.createElement(StickyBox,{offsetTop:20,offsetBottom:20},/*#__PURE__*/React.createElement(DoctorSidebar,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 col-lg-8 col-xl-9\"},loading?/*#__PURE__*/React.createElement(PageLoading,{loading:loading}):/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(Link,{to:\"/employer/jobs/add-job\",className:\"btn btn-primary\"},\"Add Job\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(Tabs,{className:\"tab-view\",activeKey:key,onSelect:handleSelect,id:\"controlled-tab-example\"},/*#__PURE__*/React.createElement(Tab,{className:\"nav-item\",eventKey:1,title:\"Opened Jobs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(Table,{className:\"table-striped\",style:{overflowX:\"auto\"},columns:columns// bordered\n,dataSource:open,rowKey:function rowKey(record){return record.id;},showSizeChanger:true,pagination:{total:open?open.length:0,showTotal:function showTotal(total,range){return\"Showing \".concat(range[0],\" to \").concat(range[1],\" of \").concat(total,\" entries\");},showSizeChanger:true,onShowSizeChange:onShowSizeChange,itemRender:itemRender}}))))))),/*#__PURE__*/React.createElement(Tab,{className:\"nav-item\",eventKey:2,title:\"Closed Jobs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(Table,{className:\"table-striped\",style:{overflowX:\"auto\"},columns:columns// bordered\n,dataSource:close,rowKey:function rowKey(record){return record.id;},showSizeChanger:true,pagination:{total:close?close.length:0,showTotal:function showTotal(total,range){return\"Showing \".concat(range[0],\" to \").concat(range[1],\" of \").concat(total,\" entries\");},showSizeChanger:true,onShowSizeChange:onShowSizeChange,itemRender:itemRender}}))))))),/*#__PURE__*/React.createElement(Tab,{className:\"nav-item\",eventKey:3,title:\"processed Jobs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(Table,{className:\"table-striped\",style:{overflowX:\"auto\"},columns:columns// bordered\n,dataSource:processed,rowKey:function rowKey(record){return record.id;},showSizeChanger:true,pagination:{total:processed?processed.length:0,showTotal:function showTotal(total,range){return\"Showing \".concat(range[0],\" to \").concat(range[1],\" of \").concat(total,\" entries\");},showSizeChanger:true,onShowSizeChange:onShowSizeChange,itemRender:itemRender}}))))))),/*#__PURE__*/React.createElement(Tab,{className:\"nav-item\",eventKey:4,title:\"Completed Jobs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(Table,{className:\"table-striped\",style:{overflowX:\"auto\"},columns:columns// bordered\n,dataSource:coplete,rowKey:function rowKey(record){return record.id;},showSizeChanger:true,pagination:{total:coplete?coplete.length:0,showTotal:function showTotal(total,range){return\"Showing \".concat(range[0],\" to \").concat(range[1],\" of \").concat(total,\" entries\");},showSizeChanger:true,onShowSizeChange:onShowSizeChange,itemRender:itemRender}})))))))))),/*#__PURE__*/React.createElement(Modal,{show:activeModal==='action',onHide:handleCloseModal,centered:true},/*#__PURE__*/React.createElement(Modal.Body,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-content p-2\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"modal-title\"},action.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-4\"},\"Are you sure want to \",action.name,\"?\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn bg-success-light mr-2\",onClick:function onClick(){action.func();handleCloseModal();}},\" OK \"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn bg-danger-light\",\"data-dismiss\":\"modal\",onClick:handleCloseModal},\"Cancel\")))))))));}export default Appointments;","map":{"version":3,"sources":["E:/CSR-master/src/client/components/employer/jobs/index.jsx"],"names":["React","useContext","useState","useEffect","StickyBox","DoctorSidebar","Link","useHistory","Tabs","Tab","Table","Modal","itemRender","onShowSizeChange","IMG01","EmployerContext","ReactHtmlParser","convertNodeToElement","moment","PageLoading","Appointments","history","getEmployerJobs","employerJobs","getJobWithProposals","closeJob","openJob","processJob","loading","open","close","coplete","processed","key","setKey","activeModal","setActiveModal","action","setAction","handleSelect","handleJobProposals","id","push","transform","node","name","openModal","handleCloseModal","handleActionBtn","func","columns","title","dataIndex","render","image","imageUrl","sorter","a","b","length","category","date","format","created_at","className","status","proposals_count","overflowX","record","total","showTotal","range","showSizeChanger"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport StickyBox from \"react-sticky-box\";\nimport DoctorSidebar from '../sidebar';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport { Table } from \"antd\";\nimport 'antd/dist/antd.css';\nimport { Modal } from 'react-bootstrap';\nimport { itemRender, onShowSizeChange } from \"../paginationfunction\";\nimport { IMG01 } from './img';\n// context\nimport { EmployerContext } from \"../../../context/employer\";\nimport ReactHtmlParser, { convertNodeToElement } from 'react-html-parser';\nimport moment from \"moment\";\nimport PageLoading from \"../../loading/pageloading\";\n\nfunction Appointments() {\n\n  const history = useHistory();\n  // context values\n  const { getEmployerJobs, employerJobs, getJobWithProposals, closeJob, openJob, processJob, loading } = useContext(EmployerContext);\n  const { open, close, coplete, processed } = employerJobs;\n\n  // state values\n  const [key, setKey] = useState(1);\n  const [activeModal, setActiveModal] = useState(null);\n  const [action, setAction] = useState({});\n\n  const handleSelect = (key) => {\n    setKey(key);\n  }\n\n  useEffect(() => {\n    getEmployerJobs();\n  }, [])\n\n  // const handleSingleJob = async (id) => {\n  //   await getJobWithProposals(id);\n  //   history.push(\"/employer/jobs/single-job\");\n  // }\n\n  const handleJobProposals = async (id) => {\n    await getJobWithProposals(id);\n    history.push(\"/employer/jobs/cover-letters\");\n  }\n\n  const transform = (node) => {\n    node.name = 'span';\n    return convertNodeToElement(node);\n  }\n\n  const openModal = (id) => {\n    setActiveModal(id);\n  }\n\n  const handleCloseModal = () => {\n    setActiveModal(false);\n  };\n\n  const handleActionBtn = (name, func) => {\n    openModal('action');\n    setAction({ name, func });\n  }\n\n  const columns = [\n    {\n      title: \"Job Title\",\n      dataIndex: \"title\",\n      render: (title, { id, image }) => {\n        const imageUrl = image ? `http://excodeteam.com/crs/public/images/${image}` : IMG01;\n        return (\n          <div className=\"table-avatar\">\n            <Link to={`/employer/jobs/single-job/${id}`} className=\"avatar avatar-sm mr-2\">\n              <img alt=\"\" src={imageUrl} />\n            </Link>\n            <Link to={`/employer/jobs/single-job/${id}`}>{title}</Link>\n          </div>\n        )\n      },\n      sorter: (a, b) => a.title.length - b.title.length,\n    },\n    // {\n    //   title: \"Details\",\n    //   dataIndex: \"details\",\n    //   render: (details) => (ReactHtmlParser(details, {transform})),\n    //   sorter: (a, b) => a.details.length - b.details.length,\n    // },\n    {\n      title: \"Category\",\n      dataIndex: \"category\",\n      render: (category) => (category ? category.name : null),\n      sorter: (a, b) => a.category.name.length - b.category.name.length,\n    },\n    {\n      title: \"Posted At\",\n      dataIndex: \"created_at\",\n      render: (date) => (moment(date).format(\"YYYY-MM-DD\")),\n      sorter: (a, b) => a.created_at.length - b.created_at.length,\n    },\n    {\n      dataIndex: \"status\",\n      className: \"text-right\",\n      render: (status, { id, proposals_count }) => {\n        return (\n          <div className=\"appointments\">\n            <div className=\"appointment-action\">\n              <Link to=\"#\" className=\"btn btn-sm bg-info-light\" onClick={() => handleJobProposals(id)}>\n                <i className=\"far fa-eye\"></i> Proposals ({proposals_count})\n              </Link>\n              {\n                status === \"0\" ?\n                  <>\n                    <button className=\"btn btn-sm bg-danger-light\" onClick={() => handleActionBtn(\"Close\", () => closeJob(id))}>\n                      <i className=\"fas fa-lock\"></i> Close\n                    </button>\n                    <button className=\"btn btn-sm bg-primary-light\" onClick={() => handleActionBtn(\"Process\", () => processJob(id))}>\n                      <i className=\"fas fa-hourglass-end\"></i> Process\n                    </button>\n                  </>\n                  : status === \"1\" ?\n                    <>\n                      <button className=\"btn btn-sm bg-success-light\" onClick={() => handleActionBtn(\"Open\", () => openJob(id))}>\n                        <i className=\"fas fa-lock-open\"></i> Open\n                      </button>\n                      <button className=\"btn btn-sm bg-primary-light\" onClick={() => handleActionBtn(\"Process\", () => processJob(id))}>\n                        <i className=\"fas fa-hourglass-end\"></i> Process\n                      </button>\n                    </>\n                    : null\n              }\n            </div>\n          </div>\n        )\n      },\n    },\n  ];\n\n  return (\n    <>\n      <div className=\"breadcrumb-bar\">\n        <div className=\"container-fluid\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-12 col-12\">\n              <nav aria-label=\"breadcrumb\" className=\"page-breadcrumb\">\n                <ol className=\"breadcrumb\">\n                  <li className=\"breadcrumb-item\"><Link to=\"/home\">Home</Link></li>\n                  <li className=\"breadcrumb-item\"><Link to=\"/employer/jobs\">Jobs</Link></li>\n                </ol>\n              </nav>\n              <h2 className=\"breadcrumb-title\">Job</h2>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"content\">\n        <div className=\"container-fluid\">\n\n          <div className=\"row\">\n\n            <div className=\"col-md-5 col-lg-4 col-xl-3 theiaStickySidebar\">\n              <StickyBox offsetTop={20} offsetBottom={20}>\n                <DoctorSidebar />\n              </StickyBox>\n            </div>\n\n            <div className=\"col-md-7 col-lg-8 col-xl-9\">\n              {\n                loading ? <PageLoading loading={loading} /> :\n                  <div className=\"card\">\n                    <div className=\"card-header\">\n                      {/* <h4 className=\"card-title\">Jobs</h4><hr/> */}\n                      <Link to=\"/employer/jobs/add-job\" className=\"btn btn-primary\">Add Job</Link>\n                    </div>\n                    <div className=\"card-body\">\n                      <Tabs\n                        className=\"tab-view\"\n                        activeKey={key}\n                        onSelect={handleSelect}\n                        id=\"controlled-tab-example\"\n                      >\n                        <Tab className=\"nav-item\" eventKey={1} title=\"Opened Jobs\">\n                          <div className=\"row\">\n                            <div className=\"col-sm-12\">\n                              <div className=\"card\">\n                                <div className=\"card-body\">\n                                  <div className=\"table-responsive\">\n                                    <Table\n                                      className=\"table-striped\"\n                                      style={{ overflowX: \"auto\" }}\n                                      columns={columns}\n                                      // bordered\n                                      dataSource={open}\n                                      rowKey={(record) => record.id}\n                                      showSizeChanger={true}\n                                      pagination={{\n                                        total: open ? open.length : 0,\n                                        showTotal: (total, range) =>\n                                          `Showing ${range[0]} to ${range[1]} of ${total} entries`,\n                                        showSizeChanger: true,\n                                        onShowSizeChange: onShowSizeChange,\n                                        itemRender: itemRender,\n                                      }}\n                                    />\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </Tab>\n                        <Tab className=\"nav-item\" eventKey={2} title=\"Closed Jobs\">\n                          <div className=\"row\">\n                            <div className=\"col-sm-12\">\n                              <div className=\"card\">\n                                <div className=\"card-body\">\n                                  <div className=\"table-responsive\">\n                                    <Table\n                                      className=\"table-striped\"\n                                      style={{ overflowX: \"auto\" }}\n                                      columns={columns}\n                                      // bordered\n                                      dataSource={close}\n                                      rowKey={(record) => record.id}\n                                      showSizeChanger={true}\n                                      pagination={{\n                                        total: close ? close.length : 0,\n                                        showTotal: (total, range) =>\n                                          `Showing ${range[0]} to ${range[1]} of ${total} entries`,\n                                        showSizeChanger: true,\n                                        onShowSizeChange: onShowSizeChange,\n                                        itemRender: itemRender,\n                                      }}\n                                    />\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </Tab>\n                        <Tab className=\"nav-item\" eventKey={3} title=\"processed Jobs\">\n                          <div className=\"row\">\n                            <div className=\"col-sm-12\">\n                              <div className=\"card\">\n                                <div className=\"card-body\">\n                                  <div className=\"table-responsive\">\n                                    <Table\n                                      className=\"table-striped\"\n                                      style={{ overflowX: \"auto\" }}\n                                      columns={columns}\n                                      // bordered\n                                      dataSource={processed}\n                                      rowKey={(record) => record.id}\n                                      showSizeChanger={true}\n                                      pagination={{\n                                        total: processed ? processed.length : 0,\n                                        showTotal: (total, range) =>\n                                          `Showing ${range[0]} to ${range[1]} of ${total} entries`,\n                                        showSizeChanger: true,\n                                        onShowSizeChange: onShowSizeChange,\n                                        itemRender: itemRender,\n                                      }}\n                                    />\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </Tab>\n                        <Tab className=\"nav-item\" eventKey={4} title=\"Completed Jobs\">\n                          <div className=\"row\">\n                            <div className=\"col-sm-12\">\n                              <div className=\"card\">\n                                <div className=\"card-body\">\n                                  <div className=\"table-responsive\">\n                                    <Table\n                                      className=\"table-striped\"\n                                      style={{ overflowX: \"auto\" }}\n                                      columns={columns}\n                                      // bordered\n                                      dataSource={coplete}\n                                      rowKey={(record) => record.id}\n                                      showSizeChanger={true}\n                                      pagination={{\n                                        total: coplete ? coplete.length : 0,\n                                        showTotal: (total, range) =>\n                                          `Showing ${range[0]} to ${range[1]} of ${total} entries`,\n                                        showSizeChanger: true,\n                                        onShowSizeChange: onShowSizeChange,\n                                        itemRender: itemRender,\n                                      }}\n                                    />\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </Tab>\n                      </Tabs>\n                    </div>\n                  </div>\n              }\n\n              {/* action modal */}\n              <Modal show={activeModal === 'action'} onHide={handleCloseModal} centered>\n                <Modal.Body className=\"text-center\">\n                  <div className=\"form-content p-2\">\n                    <h4 className=\"modal-title\">{action.name}</h4>\n                    <p className=\"mb-4\">Are you sure want to {action.name}?</p>\n                    <button type=\"button\" className=\"btn bg-success-light mr-2\" onClick={() => { action.func(); handleCloseModal() }}> OK </button>\n                    <button type=\"button\" className=\"btn bg-danger-light\" data-dismiss=\"modal\" onClick={handleCloseModal}>Cancel</button>\n                  </div>\n                </Modal.Body>\n              </Modal>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Appointments;"]},"metadata":{},"sourceType":"module"}