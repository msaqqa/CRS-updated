{"ast":null,"code":"import _objectSpread from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\CSR-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,createContext}from'react';import axios from\"axios\";import history from\"../../history\";// Importing toastify module \nimport{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';// toast-configuration method,  \n// it is compulsory method. \ntoast.configure();// context\nvar JobContext=createContext();// provider\nvar JobProvider=/*#__PURE__*/function(_Component){_inherits(JobProvider,_Component);var _super=_createSuper(JobProvider);function JobProvider(){var _this;_classCallCheck(this,JobProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={url:\"http://excodeteam.com/crs/api/v1\",categories:{categoriesList:[],recentJobs:[],categoryJobs:[],subCategories:[]},singleJob:{},successStories:[],loading:false};_this.componentDidMount=function(){_this.getCategoriesJobs();_this.getSuccessStories();};_this.authHeader=function(){var user=JSON.parse(localStorage.getItem('user'));if(user&&user.token){return{Authorization:\"Bearer \".concat(user.token)};}else{// redirect to login page\nreturn{};}};_this.getCategoriesJobs=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(catVal,catName,catType){var category_id,sub_category,keyword;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true});if(typeof catVal===\"number\"){catType===\"sub\"?sub_category=catVal:category_id=catVal;}else{keyword=catVal;}_context.next=4;return axios({method:'post',url:\"\".concat(_this.state.url,\"/employer/all_jobs\"),data:{category_id:category_id,sub_category:sub_category,keyword:keyword}}).then(function(res){var _res$data=res.data,data=_res$data.data,categories=_res$data.categories,recent_jobs=_res$data.recent_jobs,tags=_res$data.tags;var categoryJobs=data.data;var subCategories=category_id?categories.find(function(cntry){return cntry.id==category_id;}).sub_category:[];_this.setState({categories:{categoriesList:categories,recentJobs:recent_jobs,tags:tags,categoryJobs:categoryJobs,categoryName:catName?catName:\"\",categoryType:catType,subCategories:subCategories}});var categoriesStorage={categoriesList:categories,recentJobs:recent_jobs,tags:tags,categoryJobs:categoryJobs};localStorage.setItem(\"categories\",JSON.stringify(categoriesStorage));console.log(res);},function(error){console.log(error);});case 4:_this.setState({loading:false});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2,_x3){return _ref.apply(this,arguments);};}();_this.getStorageCategoriesJobs=function(){return localStorage.getItem(\"categories\")?JSON.parse(localStorage.getItem(\"categories\")):{};};_this.getSingleJob=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true});_context2.next=3;return axios({method:'post',url:\"\".concat(_this.state.url,\"/employee/get_job\"),data:{\"job_id\":id}}).then(function(res){var data=res.data.data;var singleJob=data;_this.setState({singleJob:singleJob});// history.push(\"/jobs/single-job\");\n// history.push(\"/jobs/single-job\");\nconsole.log(res);},function(error){console.log(error);});case 3:_this.setState({loading:false});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x4){return _ref2.apply(this,arguments);};}();_this.setProposalJob=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,coverLetter){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios({method:'post',url:\"\".concat(_this.state.url,\"/employee/send_proposal\"),headers:_this.authHeader(),data:{\"job_id\":id,\"message\":coverLetter}}).then(function(res){toast.success('Success Post Proposal',{autoClose:2000,position:toast.POSITION.TOP_CENTER});console.log(res);},function(error){console.log(error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();_this.getSuccessStories=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({loading:true});_context4.next=3;return axios({method:'post',url:\"\".concat(_this.state.url,\"/admin/success_story\")}).then(function(res){var data=res.data.data;var successStories=data;_this.setState({successStories:successStories});console.log(res);},function(error){console.log(error);});case 3:_this.setState({loading:false});case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _this;}_createClass(JobProvider,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(JobContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{getCategoriesJobs:this.getCategoriesJobs,getSingleJob:this.getSingleJob,setProposalJob:this.setProposalJob,getSuccessStories:this.getSuccessStories})},this.props.children);}}]);return JobProvider;}(Component);// consumer\nvar JobConsumer=JobContext.Consumer;export{JobConsumer,JobContext};export default JobProvider;","map":{"version":3,"sources":["E:/CSR-master/src/client/context/jobs.js"],"names":["React","Component","createContext","axios","history","toast","configure","JobContext","JobProvider","state","url","categories","categoriesList","recentJobs","categoryJobs","subCategories","singleJob","successStories","loading","componentDidMount","getCategoriesJobs","getSuccessStories","authHeader","user","JSON","parse","localStorage","getItem","token","Authorization","catVal","catName","catType","setState","sub_category","category_id","keyword","method","data","then","res","recent_jobs","tags","find","cntry","id","categoryName","categoryType","categoriesStorage","setItem","stringify","console","log","error","getStorageCategoriesJobs","getSingleJob","setProposalJob","coverLetter","headers","success","autoClose","position","POSITION","TOP_CENTER","props","children","JobConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from 'react';\nimport axios from \"axios\";\nimport history from \"../../history\";\n// Importing toastify module \nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n// toast-configuration method,  \n// it is compulsory method. \ntoast.configure()\n\n// context\nconst JobContext = createContext();\n\n// provider\nclass JobProvider extends Component {\n    state = {\n        url: \"http://excodeteam.com/crs/api/v1\",\n        categories: {\n            categoriesList: [],\n            recentJobs: [],\n            categoryJobs: [],\n            subCategories: []\n        },\n        singleJob: {},\n        successStories: [],\n        loading: false,\n    }\n\n    componentDidMount = () => {\n        this.getCategoriesJobs();\n        this.getSuccessStories();\n    }\n\n    authHeader = () => {\n        const user = JSON.parse(localStorage.getItem('user'));\n        if (user && user.token) {\n            return { Authorization: `Bearer ${user.token}` };\n        } else {\n            // redirect to login page\n            return {};\n        }\n    }\n\n    // get categories jobs\n    getCategoriesJobs = async (catVal, catName, catType) => {\n        this.setState({ loading: true });\n        let category_id, sub_category, keyword;\n        if (typeof (catVal) === \"number\") {\n            catType === \"sub\" ? sub_category = catVal : category_id = catVal;\n        } else {\n            keyword = catVal\n        }\n        await axios({\n            method: 'post',\n            url: `${this.state.url}/employer/all_jobs`,\n            data: { category_id, sub_category, keyword },\n        }).then(\n            res => {\n                const { data, categories, recent_jobs, tags } = res.data;\n                const categoryJobs = data.data;\n                const subCategories = category_id ? categories.find(cntry => cntry.id == category_id).sub_category : []\n                this.setState({\n                    categories: {\n                        categoriesList: categories,\n                        recentJobs: recent_jobs,\n                        tags,\n                        categoryJobs,\n                        categoryName: catName ? catName : \"\",\n                        categoryType: catType,\n                        subCategories\n                    }\n                });\n                const categoriesStorage = { categoriesList: categories, recentJobs: recent_jobs, tags, categoryJobs }\n                localStorage.setItem(\"categories\", JSON.stringify(categoriesStorage));\n                console.log(res);\n            },\n            error => {\n                console.log(error);\n            }\n        )\n        this.setState({ loading: false });\n    };\n    // get storage categories jobs\n    getStorageCategoriesJobs = () => {\n        return localStorage.getItem(\"categories\")\n            ? JSON.parse(localStorage.getItem(\"categories\"))\n            : {};\n    };\n\n    getSingleJob = async (id) => {\n        this.setState({ loading: true });\n        await axios({\n            method: 'post',\n            url: `${this.state.url}/employee/get_job`,\n            data: { \"job_id\": id },\n        }).then(\n            res => {\n                const { data } = res.data;\n                const singleJob = data;\n                this.setState({ singleJob });\n                // history.push(\"/jobs/single-job\");\n                console.log(res);\n            },\n            error => {\n                console.log(error);\n            }\n        )\n        this.setState({ loading: false });\n    };\n\n    setProposalJob = async (id, coverLetter) => {\n        await axios({\n            method: 'post',\n            url: `${this.state.url}/employee/send_proposal`,\n            headers: this.authHeader(),\n            data: { \"job_id\": id, \"message\": coverLetter },\n        }).then(\n            res => {\n                toast.success('Success Post Proposal', { autoClose: 2000, position: toast.POSITION.TOP_CENTER })\n                console.log(res);\n            },\n            error => {\n                console.log(error);\n            }\n        )\n    }\n\n    getSuccessStories = async () => {\n        this.setState({ loading: true });\n        await axios({\n            method: 'post',\n            url: `${this.state.url}/admin/success_story`,\n        }).then(\n            res => {\n                const { data } = res.data;\n                const successStories = data;\n                this.setState({ successStories });\n                console.log(res);\n            },\n            error => {\n                console.log(error);\n            }\n        )\n        this.setState({ loading: false });\n    };\n\n    render() {\n        return (\n            <JobContext.Provider value={{\n                ...this.state,\n                getCategoriesJobs: this.getCategoriesJobs,\n                getSingleJob: this.getSingleJob,\n                setProposalJob: this.setProposalJob,\n                getSuccessStories: this.getSuccessStories,\n            }}>\n                {this.props.children}\n            </JobContext.Provider>\n        )\n    }\n}\n\n// consumer\nconst JobConsumer = JobContext.Consumer;\n\nexport { JobConsumer, JobContext };\nexport default JobProvider;"]},"metadata":{},"sourceType":"module"}